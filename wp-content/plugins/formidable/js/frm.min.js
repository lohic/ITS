
function frmFrontFormJS(){function f(){var a=jQuery(this),b=a.closest(".frm_inside_container").find("label.frm_primary_label");0<a.val().length?b.addClass("frm_visible"):b.removeClass("frm_visible")}function e(a,b){var c="";c=a instanceof jQuery?a.attr("name"):a.name;if(""===c)return c=a instanceof jQuery?a.data("name"):a.getAttribute("data-name"),""!==c&&c?c:0;c=c.replace("item_meta[","").replace("[]","").split("]");if(1>c.length)return 0;c=c.filter(function(a){return""!==a});var d=c[0],h=!1;if(1===
c.length)return d;if("[form"===c[1]||"[row_ids"===c[1])return 0;jQuery('input[name="item_meta['+d+'][form]"]').length&&(d=c[2].replace("[",""),h=!0);"other"===d&&(d=h?c[3].replace("[",""):c[1].replace("[",""));!0===b&&(d=d===c[0]?d+"-"+c[1].replace("[",""):d+"-"+c[0]+"-"+c[1].replace("[",""));return d}function k(a,b){var c=a.getAttribute("data-frmfile");if("hidden"===a.type&&null===c)return b;var d="",h="";if("checkbox"===a.type||"radio"===a.type)c=jQuery('input[name="'+a.name+'"]').closest(".frm_required_field").find("input:checked"),
jQuery(c).each(function(){d=this.value});else if("file"===a.type||c)"undefined"===typeof c&&(c=e(a,!0),c=c.replace("file","")),"undefined"===typeof b[c]&&(d=n(c)),h=c;else{c=a.className;if(-1!==c.indexOf("frm_pos_none"))return b;d=jQuery(a).val();if(null===d)d="";else if("string"!==typeof d){h=d;d="";for(var l=0;l<h.length;l++)""!==h[l]&&(d=h[l])}h=-1===c.indexOf("frm_other_input")?e(a,!0):e(a,!1);-1!==c.indexOf("frm_time_select")&&(h=h.replace("-H","").replace("-m",""))}""===d&&(""===h&&(h=e(a,!0)),
h in b||(b[h]=q(a,"data-reqmsg")));return b}function n(a){var b="";jQuery('input[name="file'+a+'"], input[name="file'+a+'[]"], input[name^="item_meta['+a+']"]').each(function(){""===b&&(b=this.value)});return b}function p(a,b,c){var d=a.value,h=e(a,!0);if(h in b)return b;var l=0===h.indexOf("conf_");if(""!==d||l){var g=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,f=q(a,"data-invmsg");""!==
d&&!1===g.test(d)?(b[h]=f,l&&(b[h.replace("conf_","")]="")):l&&(a=a.name.replace("conf_",""),c.filter('[name="'+a+'"]').val()!==d&&(b[h]="",b[h.replace("conf_","")]=""))}return b}function v(a,b){var c=a.value;""!==c&&!1!==isNaN(c/1)&&(c=e(a,!0),c in b||(b[c]=q(a,"data-invmsg")));return b}function w(a,b){var c=a.value,d=q(a,"pattern");if(""!==d&&""!==c){var h=e(a,!0);h in b||(d=new RegExp("^"+d+"$","i"),!1===d.test(c)&&(b[h]=q(a,"data-invmsg")))}return b}function q(a,b){var c=a.getAttribute(b);null===
c&&(c="");return c}function C(a,b){"undefined"===typeof b&&jQuery(a).find('input[name="frm_action"]').val();var c=jQuery(a).find(".frm_form_field");c.addClass("frm_doing_ajax");jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:jQuery(a).serialize()+"&action=frm_entries_"+b+"&nonce="+frm_js.nonce,success:function(b){var d={content:"",errors:{},pass:!1};null===b&&(b=d);b=b.replace(/^\s+|\s+$/g,"");b=0===b.indexOf("{")?jQuery.parseJSON(b):d;if("undefined"!==typeof b.redirect)jQuery(document).trigger("frmBeforeFormRedirect",
[a,b]),window.location=b.redirect;else if(""!==b.content){t(jQuery(a));-1!=frm_js.offset&&frmFrontForm.scrollMsg(jQuery(a),!1);var l=jQuery(a).find('input[name="form_id"]').val();b.content=b.content.replace(/ frm_pro_form /g," frm_pro_form frm_no_hide ");jQuery(a).closest(".frm_forms").replaceWith(b.content);d=b;if(history.pushState&&"undefined"!==typeof d.page){var g=d.page;var f=encodeURI("frm_page");g=encodeURI(g);for(var e=document.location.search.substr(1).split("&"),k=e.length,m;k--;)if(m=e[k].split("="),
m[0]==f){m[1]=g;e[k]=m.join("=");break}0>k&&(e[e.length]=[f,g].join("="));f=e.join("&");window.history.pushState({html:d.html},"","?"+f)}"function"===typeof frmThemeOverride_frmAfterSubmit&&(l=jQuery('input[name="frm_page_order_'+l+'"]').val(),d=jQuery(b.content).find('input[name="form_id"]').val(),frmThemeOverride_frmAfterSubmit(d,l,b.content,a));jQuery(b.content).find(".frm_message").length?jQuery(document).trigger("frmFormComplete",[a,b]):jQuery(document).trigger("frmPageChanged",[a,b])}else if(Object.keys(b.errors).length){t(jQuery(a),
"enable");d=!0;x();f=!1;for(l in b.errors)g=jQuery(a).find("#frm_field_"+l+"_container"),g.length&&(g.is(":visible")||(e=g.closest(".frm_toggle_container"),e.length&&(e=e.prev(),e.hasClass("frm_trigger")||(e=e.prev(".frm_trigger")),e.click())),g.is(":visible")&&(u(g,l,b.errors),d=!1,g=jQuery(a).find("#frm_field_"+l+"_container .frm-g-recaptcha, #frm_field_"+l+"_container .g-recaptcha"),g.length&&(f=!0,g=g.data("rid"),jQuery().grecaptcha&&(g?grecaptcha.reset(g):grecaptcha.reset()))));jQuery(document).trigger("frmFormErrors",
[a,b]);c.removeClass("frm_doing_ajax");y(a);!0!==f&&z(a,!1);d?a.submit():jQuery(a).prepend(b.error_message)}else D(a),z(a,!0),a.submit()},error:function(){jQuery(a).find('input[type="submit"], input[type="button"]').removeAttr("disabled");a.submit()}})}function u(a,b,c){a.length&&a.is(":visible")&&(a.addClass("frm_blank_field"),"function"===typeof frmThemeOverride_frmPlaceError?frmThemeOverride_frmPlaceError(b,c):a.append('<div class="frm_error">'+c[b]+"</div>"),jQuery(document).trigger("frmAddFieldError",
[a,b,c]))}function x(){jQuery(".form-field").removeClass("frm_blank_field has-error");jQuery(".form-field .frm_error").replaceWith("");jQuery(".frm_error_style").remove()}function y(a){var b=jQuery(a).find(".frm_blank_field:first");b.length&&frmFrontForm.scrollMsg(b,a,!0)}function A(a){a.hasClass("frm_loading_form")||(a.addClass("frm_loading_form"),a.trigger("frmStartFormLoading"));a.find('input[type="submit"], input[type="button"], button[type="submit"]').attr("disabled","disabled")}function t(a,
b,c){0<c||(a.removeClass("frm_loading_form"),a.trigger("frmEndFormLoading"),"enable"===b&&a.find('input[type="submit"], input[type="button"], button[type="submit"]').removeAttr("disabled"))}function D(a){var b=document.getElementById("frm_loading");null!==b&&(a=jQuery(a).find("input[type=file]").val(),"undefined"!==typeof a&&""!==a&&setTimeout(function(){jQuery(b).fadeIn("slow")},2E3))}function z(a,b){var c=jQuery(a).find(".frm-g-recaptcha, .g-recaptcha");c.length&&(!b||1>jQuery(a).find(".frm_next_page").length||
1>jQuery(a).find(".frm_next_page").val())&&c.closest(".frm_form_field").replaceWith('<input type="hidden" name="recaptcha_checked" value="'+frm_js.nonce+'">')}function E(){B(jQuery(this),"clear")}function F(){B(jQuery(this),"replace")}function B(a,b){var c=a.data("frmval").replace(/(\n|\r\n)/g,"\r");if(""===c||"undefined"===typeof c)return!1;var d=a.val().replace(/(\n|\r\n)/g,"\r");"replace"==b?""===d&&a.addClass("frm_default").val(c):d==c&&a.removeClass("frm_default").val("")}function G(){var a=
jQuery(this),b=a.data("eid"),c=a.data("fid");a.append('<span class="spinner" style="display:inline"></span>');jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_send_email",entry_id:b,form_id:c,nonce:frm_js.nonce},success:function(b){a.replaceWith(b)}});return!1}function H(){var a=jQuery(this).data("frmconfirm");return confirm(a)}function I(){var a=jQuery(this).data("frmtoggle");jQuery(a).is(":visible")?jQuery(a).slideUp("fast"):jQuery(a).slideDown("fast");return!1}function J(){Array.prototype.indexOf||
(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0;d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1})}function K(){"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}function L(){Array.prototype.filter||(Array.prototype.filter=function(a,b){if(void 0===this||null===this)throw new TypeError;var c=Object(this),d=c.length>>>0;if("function"!==typeof a)throw new TypeError;
for(var e=[],f=0;f<d;f++)if(f in c){var g=c[f];a.call(b,g,f,c)&&e.push(g)}return e})}function M(){Object.keys||(Object.keys=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b})}var r="",m=[];return{init:function(){jQuery(document).off("submit.formidable",".frm-show-form");jQuery(document).on("submit.formidable",".frm-show-form",frmFrontForm.submitForm);jQuery(".frm-show-form input[onblur], .frm-show-form textarea[onblur]").each(function(){""===jQuery(this).val()&&jQuery(this).blur()});
jQuery(document).on("focus",".frm_toggle_default",E);jQuery(document).on("blur",".frm_toggle_default",F);jQuery(".frm_toggle_default").blur();jQuery(document.getElementById("frm_resend_email")).click(G);jQuery(document).on("change",'.frm-show-form input[name^="item_meta"], .frm-show-form select[name^="item_meta"], .frm-show-form textarea[name^="item_meta"]',frmFrontForm.fieldValueChanged);jQuery(document).on("change keyup",".frm-show-form .frm_inside_container input, .frm-show-form .frm_inside_container select, .frm-show-form .frm_inside_container textarea",
f);jQuery(document).on("click","a[data-frmconfirm]",H);jQuery("a[data-frmtoggle]").click(I);J();K();L();M()},getFieldId:function(a,b){return e(a,b)},renderRecaptcha:function(a){var b=a.getAttribute("data-size"),c={sitekey:a.getAttribute("data-sitekey"),size:b,theme:a.getAttribute("data-theme")};if("invisible"===b){var d=jQuery(a).closest("form").find('input[name="form_id"]').val();c.callback=function(a){frmFrontForm.afterRecaptcha(a,d)}}b=grecaptcha.render(a.id,c);a.setAttribute("data-rid",b)},afterSingleRecaptcha:function(a){a=
jQuery(".frm-show-form .g-recaptcha").closest("form")[0];frmFrontForm.submitFormNow(a)},afterRecaptcha:function(a,b){var c=jQuery("#frm_form_"+b+"_container form")[0];frmFrontForm.submitFormNow(c)},submitForm:function(a){frmFrontForm.submitFormManual(a,this)},submitFormManual:function(a,b){if("undefined"===typeof frmProForm||frmProForm.goingToPreviousPage(b))var c=!1;else{var d=jQuery(b).find('.frm-g-recaptcha[data-size="invisible"], .g-recaptcha[data-size="invisible"]');d.length?(c=d.data("rid"),
c=0===grecaptcha.getResponse(c).length?d:!1):c=!1}d=b.className.trim().split(/\s+/gi);d&&1>c.length&&!(-1<d.indexOf("frm_pro_form"))||jQuery("body").hasClass("wp-admin")||(a.preventDefault(),c.length?(d=c.data("rid"),grecaptcha.reset(d),grecaptcha.execute(d)):(c=frmFrontForm.validateFormSubmit(b),0===Object.keys(c).length&&(A(jQuery(b)),frmFrontForm.submitFormNow(b,d))))},submitFormNow:function(a){-1<a.className.trim().split(/\s+/gi).indexOf("frm_ajax_submit")?1>jQuery(a).find('input[type="file"]').filter(function(){return!!this.value}).length?
(r=jQuery(a).find('input[name="frm_action"]').val(),frmFrontForm.checkFormErrors(a,r)):a.submit():a.submit()},validateFormSubmit:function(a){"undefined"!==typeof tinyMCE&&jQuery(a).find(".wp-editor-wrap").length&&tinyMCE.triggerSave();m=[];var b=jQuery(a).hasClass("frm_js_validate");b&&"undefined"!==typeof frmProForm&&(frmProForm.savingDraft(a)||frmProForm.goingToPreviousPage(a))&&(b=!1);b&&(frmFrontForm.getAjaxFormErrors(a),Object.keys(m).length&&frmFrontForm.addAjaxFormErrors(a));return m},getAjaxFormErrors:function(a){var b=
[],c=jQuery(a).find(".frm_required_field:visible input, .frm_required_field:visible select, .frm_required_field:visible textarea").filter(":not(.frm_optional)");if(c.length)for(var d=0,e=c.length;d<e;d++)b=k(c[d],b);c=jQuery(a).find("input[type=email]").filter(":visible");d=jQuery(a).find("input,select,textarea");if(d.length){e=0;for(var f=d.length;e<f;e++){var g=d[e];""!==g.value&&"hidden"!==g.type&&("number"===g.type?b=v(g,b):"email"===g.type?b=p(g,b,c):null!==g.pattern&&(b=w(g,b)))}}c=jQuery(a).find(".frm-g-recaptcha");
c.length&&(d=c.data("rid"),0===grecaptcha.getResponse(d).length&&(c=c.closest(".frm_form_field").attr("id").replace("frm_field_","").replace("_container",""),b[c]=""));m=b;if("function"===typeof frmThemeOverride_jsErrors&&(r=jQuery(a).find('input[name="frm_action"]').val(),a=frmThemeOverride_jsErrors(r,a),Object.keys(a).length))for(var n in a)m[n]=a[n];return m},addAjaxFormErrors:function(a){x();for(var b in m){var c=jQuery(a).find("#frm_field_"+b+"_container");c.length?u(c,b,m):delete m[b]}y(a)},
checkFormErrors:function(a,b){C(a,b)},checkRequiredField:function(a,b){return k(a,b)},showSubmitLoading:function(a){A(a)},removeSubmitLoading:function(a,b,c){t(a,b,c)},scrollToID:function(a){a=jQuery(document.getElementById(a));frmFrontForm.scrollMsg(a,!1)},scrollMsg:function(a,b,c){if("undefined"===typeof b){if(a=jQuery(document.getElementById("frm_form_"+a+"_container")),1>a.length)return}else a="string"===typeof a?jQuery(b).find("#frm_field_"+a+"_container"):a;if(a=a.offset().top){a-=frm_js.offset;
b=jQuery("html").css("margin-top");var d=jQuery("body").css("margin-top");if(b||d)a=a-parseInt(b)-parseInt(d);if(a&&window.innerHeight&&(b=document.documentElement.scrollTop||document.body.scrollTop,a>b+window.innerHeight||a<b))return"undefined"===typeof c?jQuery(window).scrollTop(a):jQuery("html,body").animate({scrollTop:a},500),!1}},fieldValueChanged:function(a){var b=frmFrontForm.getFieldId(this,!1);if(b&&"undefined"!==typeof b&&(!a.frmTriggered||a.frmTriggered!=b)&&(jQuery(document).trigger("frmFieldChanged",
[this,b,a]),!0!==a.selfTriggered&&jQuery(this).closest("form").hasClass("frm_js_validate"))){a=[];b=jQuery(this).closest(".frm_form_field");b.hasClass("frm_required_field")&&!jQuery(this).hasClass("frm_optional")&&(a=k(this,a));if(1>a.length)if("email"===this.type){var c=jQuery(this).closest("form").find("input[type=email]");a=p(this,a,c)}else"number"===this.type?a=v(this,a):null!==this.pattern&&(a=w(this,a));b.removeClass("frm_blank_field has-error");b.find(".frm_error").remove();if(0<Object.keys(a).length)for(var d in a)u(b,
d,a)}},savingDraft:function(a){console.warn("DEPRECATED: function frmFrontForm.savingDraft in v3.0 use frmProForm.savingDraft");if("undefined"!==typeof frmProForm)return frmProForm.savingDraft(a)},goingToPreviousPage:function(a){console.warn("DEPRECATED: function frmFrontForm.goingToPreviousPage in v3.0 use frmProForm.goingToPreviousPage");if("undefined"!==typeof frmProForm)return frmProForm.goingToPreviousPage(a)},hideOrShowFields:function(a,b){console.warn("DEPRECATED: function frmFrontForm.hideOrShowFields in v3.0 use frmProForm.hideOrShowFields");
"undefined"!==typeof frmProForm&&frmProForm.hideOrShowFields()},hidePreviouslyHiddenFields:function(){console.warn("DEPRECATED: function frmFrontForm.hidePreviouslyHiddenFields in v3.0 use frmProForm.hidePreviouslyHiddenFields");"undefined"!==typeof frmProForm&&frmProForm.hidePreviouslyHiddenFields()},checkDependentDynamicFields:function(a){console.warn("DEPRECATED: function frmFrontForm.checkDependentDynamicFields in v3.0 use frmProForm.checkDependentDynamicFields");"undefined"!==typeof frmProForm&&
frmProForm.checkDependentDynamicFields(a)},checkDependentLookupFields:function(a){console.warn("DEPRECATED: function frmFrontForm.checkDependentLookupFields in v3.0 use frmProForm.checkDependentLookupFields");"undefined"!==typeof frmProForm&&frmProForm.checkDependentLookupFields(a)},loadGoogle:function(){console.warn("DEPRECATED: function frmFrontForm.loadGoogle in v3.0 use frmProForm.loadGoogle");frmProForm.loadGoogle()},removeUsedTimes:function(a,b){console.warn("DEPRECATED: function frmFrontForm.removeUsedTimes in v3.0 use frmProForm.removeUsedTimes");
"undefined"!==typeof frmProForm&&frmProForm.removeUsedTimes()},escapeHtml:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},invisible:function(a){jQuery(a).css("visibility","hidden")},visible:function(a){jQuery(a).css("visibility","visible")}}}var frmFrontForm=frmFrontFormJS();jQuery(document).ready(function(f){frmFrontForm.init()});
function frmRecaptcha(){for(var f=jQuery(".frm-g-recaptcha"),e=0,k=f.length;e<k;e++)frmFrontForm.renderRecaptcha(f[e])}function frmAfterRecaptcha(f){frmFrontForm.afterSingleRecaptcha(f)}
function frmUpdateField(f,e,k,n,p){jQuery(document.getElementById("frm_update_field_"+f+"_"+e+"_"+p)).html('<span class="frm-loading-img"></span>');jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_update_field_ajax",entry_id:f,field_id:e,value:k,nonce:frm_js.nonce},success:function(){""===n.replace(/^\s+|\s+$/g,"")?jQuery(document.getElementById("frm_update_field_"+f+"_"+e+"_"+p)).fadeOut("slow"):jQuery(document.getElementById("frm_update_field_"+f+"_"+e+"_"+p)).replaceWith(n)}})}
function frmDeleteEntry(f,e){console.warn("DEPRECATED: function frmDeleteEntry in v2.0.13 use frmFrontForm.deleteEntry");jQuery(document.getElementById("frm_delete_"+f)).replaceWith('<span class="frm-loading-img" id="frm_delete_'+f+'"></span>');jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_destroy",entry:f,nonce:frm_js.nonce},success:function(k){"success"===k.replace(/^\s+|\s+$/g,"")?jQuery(document.getElementById(e+f)).fadeOut("slow"):jQuery(document.getElementById("frm_delete_"+
f)).replaceWith(k)}})}function frmOnSubmit(f){console.warn("DEPRECATED: function frmOnSubmit in v2.0 use frmFrontForm.submitForm");frmFrontForm.submitForm(f,this)}
function frm_resend_email(f,e){console.warn("DEPRECATED: function frm_resend_email in v2.0");var k=jQuery(document.getElementById("frm_resend_email"));k.append('<span class="spinner" style="display:inline"></span>');jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_send_email",entry_id:f,form_id:e,nonce:frm_js.nonce},success:function(e){k.replaceWith(e)}})};
function frmProFormJS(){function Y(a){var b=jQuery(this),c=b.attr("type");"submit"!==c&&a.preventDefault();a=b.parents("form:first");var d="",e="",f=this.name;"frm_prev_page"===f||-1!==this.className.indexOf("frm_prev_page")?d=jQuery(a).find(".frm_next_page").attr("id").replace("frm_next_p_",""):"frm_save_draft"===f||-1!==this.className.indexOf("frm_save_draft")?e=1:-1!==this.className.indexOf("frm_page_skip")?(b=b.data("page"),f=jQuery(a).find('input[name="form_id"]').val(),f=jQuery(a).find('input[name="frm_page_order_'+
f+'"]'),jQuery(a).append('<input name="frm_last_page" type="hidden" value="'+f.val()+'" />'),""===b?f.remove():f.val(b)):-1!==this.className.indexOf("frm_page_back")&&(d=b.data("page"));jQuery(".frm_next_page").val(d);jQuery(".frm_saving_draft").val(e);"submit"!==c&&a.trigger("submit")}function Na(){jQuery(this).parent().children(".frm_toggle_container").slideToggle("fast");var a=jQuery(this).children(".frm_arrow_icon");-1!==this.className.indexOf("active")?(this.className=this.className.replace(" active",
""),a.attr("aria-expanded","false")):(this.className+=" active",a.attr("aria-expanded","true"))}function Oa(){if(-1===this.className.indexOf("frm_custom_date")&&"undefined"!==typeof __frmDatepicker){var a=__frmDatepicker,b=this.id,c=b.split("-");c=A(this.name)?'input[id^="'+c[0]+'"]':'input[id^="'+c.join("-")+'"]';jQuery.datepicker.setDefaults(jQuery.datepicker.regional[""]);for(var d=0,e=0;e<a.length;e++)if(a[e].triggerID=="#"+b||a[e].triggerID==c){d=e;break}""!==a[d].options.defaultDate&&(a[d].options.defaultDate=
new Date(a[d].options.defaultDate));jQuery(this).datepicker(jQuery.extend(jQuery.datepicker.regional[a[d].locale],a[d].options))}}function Z(a){if("undefined"!==typeof __frmDropzone)for(var b=__frmDropzone,c=0;c<b.length;c++)Pa(c,a)}function Pa(a,b){var c=__frmDropzone,d="#"+c[a].htmlID+"_dropzone",e=c[a].fieldName;"undefined"!==typeof b&&-1!==d.indexOf("-0_dropzone")&&(d=d.replace("-0_dropzone","-"+b+"_dropzone"),e=e.replace("[0]","["+b+"]"),delete c[a].mockFiles);var f=jQuery(d);if(!(1>f.length||
f.hasClass("dz-clickable"))){var h=c[a].maxFiles;if("undefined"!==typeof c[a].mockFiles){var g=c[a].mockFiles.length;0<h&&(h-=g)}var k=f.closest("form");g="#"+k.attr("id");"#undefined"==g&&(g="form."+k.attr("class").replace(" ","."));f.dropzone({url:frm_js.ajax_url,addRemoveLinks:!0,paramName:f.attr("id").replace("_dropzone",""),maxFilesize:c[a].maxFilesize,maxFiles:h,uploadMultiple:c[a].uploadMultiple,hiddenInputContainer:g,dictDefaultMessage:c[a].defaultMessage,dictFallbackMessage:c[a].fallbackMessage,
dictFallbackText:c[a].fallbackText,dictFileTooBig:c[a].fileTooBig,dictInvalidFileType:c[a].invalidFileType,dictResponseError:c[a].responseError,dictCancelUpload:c[a].cancel,dictCancelUploadConfirmation:c[a].cancelConfirm,dictRemoveFile:c[a].remove,dictMaxFilesExceeded:c[a].maxFilesExceeded,fallback:function(){jQuery(this.element).closest("form").removeClass("frm_ajax_submit")},init:function(){this.on("sending",function(b,e,f){e=d;var h=jQuery(e).closest("form");if(1>h.length)e=!1;else if(h=jQuery(h).find(".frm_required_field:visible input, .frm_required_field:visible select, .frm_required_field:visible textarea, "+
e),1>h.length)e=!0;else{for(var g=!0,k=0,l=h.length;k<l&&"#"+h[k].id!==e;k++)if(!(-1<h[k].className.indexOf("frm_optional")||null!==h[k].getAttribute("data-frmfile")))if(1>frmFrontForm.checkRequiredField(h[k],[]).length){g=!0;break}else g=!1;e=g}if(e){e=""!==document.getElementById("frm_verify_"+c[a].parentFormID).value||window._phantom||window.callPhantom||window.__phantomas||window.Buffer||window.emit||window.spawn?!0:!1;if(e)return this.removeFile(b),alert(frm_js.file_spam),!1;f.append("action",
"frm_submit_dropzone");f.append("field_id",c[a].fieldID);f.append("form_id",c[a].formID);f.append("nonce",frm_js.nonce)}else return this.removeFile(b),alert(frm_js.empty_fields),!1});this.on("success",function(b,d){for(var f=jQuery.parseJSON(d),h=0;h<f.length;h++)!0!==c[a].uploadMultiple&&jQuery('input[name="'+e+'"]').val(f[h])});this.on("successmultiple",function(b,d){for(var f=jQuery.parseJSON(d),h=0;h<b.length;h++)jQuery(b[h].previewElement).append(aa(c[a],f[h],e))});this.on("complete",function(b){u--;
frmFrontForm.removeSubmitLoading(k,"enable",u);if("undefined"!==typeof b.mediaID){c[a].uploadMultiple&&jQuery(b.previewElement).append(aa(c[a],b.mediaID,e));for(var d=b.previewElement.querySelectorAll("[data-dz-name]"),f=0,h=d.length;f<h;f++)d[f].innerHTML='<a href="'+b.url+'" target="_blank" rel="noopener">'+b.name+"</a>"}});this.on("addedfile",function(){u++;frmFrontForm.showSubmitLoading(k)});this.on("removedfile",function(b){!1!==b.accepted&&!0!==c[a].uploadMultiple&&jQuery('input[name="'+e+'"]').val("");
!1!==b.accepted&&"undefined"!==typeof b.mediaID&&(jQuery(b.previewElement).remove(),this.options.maxFiles=c[a].maxFiles-this.files.length)});if("undefined"!==typeof c[a].mockFiles)for(var b=0;b<c[a].mockFiles.length;b++){var f={name:c[a].mockFiles[b].name,size:c[a].mockFiles[b].size,url:c[a].mockFiles[b].file_url,mediaID:c[a].mockFiles[b].id};this.emit("addedfile",f);this.emit("thumbnail",f,c[a].mockFiles[b].url);this.emit("complete",f);this.files.push(f)}}})}}function aa(a,b,c){return'<input name="'+
c+'[]" type="hidden" value="'+b+'" data-frmfile="'+a.fieldID+'" />'}function Qa(){var a=jQuery(this).data("frm-remove");Ra(jQuery(this).parent(".dz-preview"));a=jQuery('input[name="'+a+'"]');a.length&&a.val("")}function Sa(){var a=this.type,b=!1,c=!1;if("select-one"===a)c=!0,"frm_other_trigger"===this.options[this.selectedIndex].className&&(b=!0);else if("select-multiple"===a){c=!0;var d=this.options;b=!1;for(var e=0;e<d.length;e++)if("frm_other_trigger"===d[e].className&&d[e].selected){b=!0;break}}c?
(a=jQuery(this).parent().children(".frm_other_input"),a.length&&(b?a[0].className=a[0].className.replace("frm_pos_none",""):(1>a[0].className.indexOf("frm_pos_none")&&(a[0].className+=" frm_pos_none"),a[0].value=""))):"radio"===a?jQuery(this).is(":checked")&&(jQuery(this).closest(".frm_radio").children(".frm_other_input").removeClass("frm_pos_none"),jQuery(this).closest(".frm_radio").siblings().children(".frm_other_input").addClass("frm_pos_none").val("")):"checkbox"===a&&(this.checked?jQuery(this).closest(".frm_checkbox").children(".frm_other_input").removeClass("frm_pos_none"):
jQuery(this).closest(".frm_checkbox").children(".frm_other_input").addClass("frm_pos_none").val(""))}function Ta(a,b,c,d){a=jQuery(b);ba(c,a);d="undefined"!==typeof d.originalEvent||-1<d.currentTarget.className.indexOf("frm_chzn")?"value changed":"other";ca(c,a,d);J(c,a)}function ba(a,b){if(!("undefined"===typeof __FRMRULES||"undefined"===typeof __FRMRULES[a]||1>__FRMRULES[a].dependents.length||null===b||"undefined"===typeof b))for(var c=__FRMRULES[a],d=w(b[0].name),e=0,f=c.dependents.length;e<f;e++)x(c.dependents[e],
d)}function x(a,b){var c=K(a);if(!(!1===c||1>c.conditions.length)){var d=[];if(c.isRepeating)if(""!==b.repeatingSection){var e="frm_field_"+c.fieldId+"-";e+=b.repeatingSection+"-"+b.repeatRow+"_container";d.push(e)}else if(d=B(c),null!==document.getElementById("frm_field_"+d+"_container")){d=[];e=document.querySelectorAll(".frm_field_"+c.fieldId+"_container");for(var f=0,h=e.length;f<h;f++)d.push(e[f].id)}else{d=[];f=B(c);e="frm_field_"+c.fieldId+"-"+f+"-";f=document.querySelectorAll('[name="item_meta['+
f+'][row_ids][]"]');h=0;for(var g=f.length;h<g;h++)""!==f[h].value&&d.push(e+f[h].value+"_container");1>d.length&&d.push(e+"0_container")}else d.push("frm_field_"+c.fieldId+"_container");e=d.length;for(f=0;f<e;f++)c.containerId=d[f],da(c,d[f]),ea(c)}}function B(a){var b="";"0"!==a.inEmbedForm?b=a.inEmbedForm:"0"!==a.inSection&&(b=a.inSection);return b}function da(a,b){if(a.isRepeating){var c=b.replace("_container","").split("-");a.repeatRow=c[2]}else a.repeatRow=""}function ea(a){for(var b=[],c=a.conditions.length,
d=0;d<c;d++)b.push(Ua(a.conditions[d],a));c=Va="any"==a.anyAll?-1<b.indexOf(!0)?a.showHide:fa(a.showHide):-1<b.indexOf(!1)?fa(a.showHide):a.showHide;b=null!==document.getElementById(a.containerId);"show"==c?"data"==a.fieldType&&a.hasOwnProperty("dataLogic")?(a={fieldId:a.fieldId,fieldKey:a.fieldKey,formId:a.formId,containerId:a.containerId,repeatRow:a.repeatRow,dataLogic:{actualValue:a.dataLogic.actualValue,fieldId:a.dataLogic.fieldId},children:"",inputType:a.inputType},"data"==a.inputType?Wa(a,b):
b&&Xa(a)):!1!==v(a.containerId,a.formId)&&(y(a.containerId,a.formId),b?(b=ha(a.containerId),ia(b,"divider"==a.fieldType||"form"==a.fieldType,a.formId),jQuery("#"+a.containerId).show()):(b=ja(a),ia(b,"divider"==a.fieldType||"form"==a.fieldType,a.formId))):L(a,b)}function K(a){return"undefined"===typeof __FRMRULES||"undefined"===typeof __FRMRULES[a]?!1:__FRMRULES[a]}function Ua(a,b){var c=K(a.fieldId),d=ka(c,b);"data"==b.fieldType&&"data"==c.fieldType?(c=""===a.value?""===d||1==d.length&&""===d[0]?
!1:!0:M(a.operator,a.value,d),b.dataLogic=a,b.dataLogic.actualValue=d,d=c):d=M(a.operator,a.value,d);return d}function ka(a,b){if("radio"==a.inputType||"checkbox"==a.inputType||"toggle"==a.inputType){var c=la(a,b);c=document.querySelectorAll('input[name^="'+c+'"]');c="checkbox"===a.inputType||"toggle"===a.inputType?C(c):N(c)}else if(!0===a.isMultiSelect){c=la(a,b);var d=document.querySelectorAll('[name^="'+c+'"]');1==d.length&&"hidden"!=d[0].type?(c=jQuery('[name^="'+c+'"]').val(),null===c&&(c="")):
c=C(d)}else if(c="field_"+a.fieldKey,a.isRepeating&&(c+="-"+b.repeatRow),d=document.getElementById(c),null===d){d="";if("time"==a.fieldType){var e=document.getElementById(c+"_H");null!==e&&(d=document.getElementById(c+"_m"),d=e.value+":"+d.value,c=document.getElementById(c+"_A"),":"==d?d="":null!==c&&(d+=" "+c.value))}c=d}else c=d.value;"undefined"===typeof c?c="":"string"===typeof c&&(c=c.trim());return c}function la(a,b){return a.isRepeating?"item_meta["+("0"!==b.inEmbedForm?b.inEmbedForm:b.inSection)+
"]["+b.repeatRow+"]["+a.fieldId+"]":"item_meta["+a.fieldId+"]"}function C(a){for(var b=[],c=0,d=a.length;c<d;c++)"hidden"==a[c].type||a[c].checked?b.push(a[c].value):"undefined"!==typeof a[c].dataset.off&&b.push(a[c].dataset.off);0===b.length&&(b=!1);return b}function M(a,b,c){b=Ya(b);c=Za(b,c);return"string"===typeof b&&"-1"!=b.indexOf("&quot;")&&M(a,b.replace("&quot;",'"'),c)?!0:{"==":function(a,b){return a===b},"!=":function(a,b){return a!==b},"<":function(a,b){return a>b},">":function(a,b){return a<
b},LIKE:function(a,b){if(!b)return!1;a=O(a);b=ma(a,b);return-1!=b.indexOf(a)},"not LIKE":function(a,b){if(!b)return!0;a=O(a);b=ma(a,b);return-1==b.indexOf(a)}}[a](b,c)}function Ya(a){-1!==String(a).search(/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/)?a=parseFloat(a):"string"===typeof a&&(a=a.trim());return a}function Za(a,b){if("undefined"===typeof b||null===b||!1===b)b="";jQuery.isArray(b)&&-1<jQuery.inArray(String(a),b)&&(b=a);"number"===typeof a&&"string"===typeof b&&(b=parseFloat(b));"string"===typeof b&&
(b=b.trim());return b}function ma(a,b){b=O(b);if(jQuery.isArray(b))for(var c=0,d=b.length;c<d;c++){var e=b[c].toLowerCase();if(-1<e.indexOf(a)){b=a;break}}return b}function O(a){"string"===typeof a?a=a.toLowerCase():"number"===typeof a&&(a=a.toString());return a}function fa(a){return"show"==a?"hide":"show"}function ha(a){return document.getElementById(a).querySelectorAll('select[name^="item_meta"], textarea[name^="item_meta"], input[name^="item_meta"]')}function ja(a){if("divider"==a.fieldType){var b=
[];"divider"==a.fieldType&&(b=document.querySelectorAll('[data-sectionid="'+a.fieldId+'"]'));a=b}else"form"==a.fieldType?a=document.querySelectorAll('[id^="field_'+a.fieldKey+'-"]'):(a=a.isRepeating?"item_meta["+B(a)+"]["+a.repeatRow+"]["+a.fieldId+"]":"item_meta["+a.fieldId+"]",a=document.querySelectorAll('[name^="'+a+'"]'));return a}function ia(a,b,c){if(a.length)for(var d,e=["checkbox","radio"],f=0;f<a.length;f++)if(!(0<f&&"undefined"!==typeof d&&d.name==a[f].name&&-1<e.indexOf(d.type)||b&&D(a[f],
c))){d=a[f];var h=jQuery(d),g=h.data("frmval");if("undefined"!==typeof g){if("checkbox"==d.type||"radio"==d.type)na(d.name,g);else if(-1<d.name.indexOf("[]")){var k=document.getElementsByName(d.name);if(jQuery.isArray(g))for(var l=0,m=g.length;l<m;l++)l in k&&(k[l].value=g[l]);else null!==k[0]&&(k[0].value=g)}else g.constructor===Object&&(k=d.getAttribute("name").split("[").slice(-1)[0],null!==k&&(k=k.replace("]",""),g=g[k],"undefined"==typeof g&&(g=""))),d.value=g;"SELECT"==d.tagName&&E(d);r(h)}d=
a[f];h=frmFrontForm.getFieldId(d,!1);h=P(h);!1!==h&&"lookup"!=h.fieldType&&oa(h,d,"value changed");d=a[f];if(h="undefined"!==typeof __FRMCALC){h=d.type;g=!1;if("text"==h||"hidden"==h||"number"==h)g=!0;h=g}if(h){h=__FRMCALC;g=d.name;k=d.id.replace("field_","");if(A(g))for(g=k.split("-"),k="",l=0;l<g.length-1;l++)k=""===k?g[l]:k+"-"+g[l];g=k;k=null;A(d.name)&&(k="hidden"!=d.type?jQuery(d).closest(".frm_form_field"):jQuery(d));d=k;void 0!==h.calc[g]&&Q(h,g,[],d)}d=a[f]}}function D(a,b){var c=frmFrontForm.getFieldId(a,
!0);return v("frm_field_"+c+"_container",b)}function L(a,b){if(!v(a.containerId,a.formId))if(pa(a.containerId,a.formId),b){jQuery("#"+a.containerId).hide();var c=ha(a.containerId);F(c)}else c=ja(a),F(c)}function F(a){if(!(1>a.length)){for(var b,c=!0,d=0,e=a.length;d<e;d++)-1<a[d].className.indexOf("frm_dnc")||(0<d&&b.name!=a[d].name&&!0===c&&r(jQuery(b)),c=!0,"radio"==a[d].type||"checkbox"==a[d].type?a[d].checked=!1:"SELECT"==a[d].tagName?(0===a[d].selectedIndex?c=!1:a[d].selectedIndex=0,b=a[d].id.replace(/[^\w]/g,
"_"),null!==document.getElementById(b+"_chosen")&&jQuery(a[d]).trigger("chosen:updated")):a[d].value=""),b=a[d];!0===c&&r(jQuery(b))}}function v(a,b){var c=!1;-1<z(b).indexOf(a)&&(c=!0);return c}function pa(a,b){var c=z(b);if(!(-1<c.indexOf(a))){c.push(a);c=JSON.stringify(c);var d=document.getElementById("frm_hide_fields_"+b);null!==d&&(d.value=c)}}function z(a){var b=[];a=document.getElementById("frm_hide_fields_"+a);return null===a?b:b=(b=a.value)?JSON.parse(b):[]}function na(a,b){for(var c=document.getElementsByName(a),
d=0,e=c.length;d<e;d++)if("hidden"==c[d].type)jQuery.isArray(b)&&null!==b[d]?c[d].value=b[d]:c[d].value=b;else if(c[d].value==b||jQuery.isArray(b)&&-1<b.indexOf(c[d].value))if(c[d].checked=!0,"radio"==c[d].type)break}function y(a,b){var c=z(b),d=c.indexOf(a);-1<d&&(c.splice(d,1),c=JSON.stringify(c),document.getElementById("frm_hide_fields_"+b).value=c)}function ca(a,b,c){if(!("undefined"===typeof __FRMLOOKUP||"undefined"===typeof __FRMLOOKUP[a]||1>__FRMLOOKUP[a].dependents.length||null===b||"undefined"===
typeof b)){a=__FRMLOOKUP[a];b=w(b[0].name);for(var d=0,e=a.dependents.length;d<e;d++)R(a.dependents[d],b,c)}}function R(a,b,c){a=P(a);if(!(!1===a||1>a.parents.length))if("lookup"==a.fieldType){if(""!==b.repeatRow){c=[];var d="frm_field_"+a.fieldId+"-";d+=b.repeatingSection+"-"+b.repeatRow+"_container";b=document.getElementById(d);null!==b&&c.push(b);b=c}else b=[],a.isRepeating?b=document.querySelectorAll(".frm_field_"+a.fieldId+"_container"):(c=document.getElementById("frm_field_"+a.fieldId+"_container"),
null!==c&&b.push(c));c=0;for(d=b.length;c<d;c++){da(a,b[c].id);var e=a,f=b[c];e.parentVals=qa(e);if("select"==e.inputType)$a(e,f);else if("radio"==e.inputType||"checkbox"==e.inputType)if(!1===e.parentVals){var h=f.getElementsByTagName("input");ra(e,f);F(h)}else ab(e,f)}}else if("value changed"===c)for(c="field_"+a.fieldKey,c=a.isRepeating?""!==b.repeatingSection?'[id="'+c+"-"+b.repeatRow+'"]':'[id^="'+c+'-"]':'[id="'+c+'"]',b=document.querySelectorAll(c),c=0,d=b.length;c<d;c++)e=a,f=w(b[c].name),
e.repeatRow=""!==f.repeatRow?f.repeatRow:"",oa(a,b[c])}function P(a){return"undefined"===typeof __FRMLOOKUP||"undefined"===typeof __FRMLOOKUP[a]?!1:__FRMLOOKUP[a]}function oa(a,b){a.parentVals=qa(a);var c=b.id;c in n&&0<n[c].length?sa(a,b):(sa(a,b),ta(a,b))}function qa(a){for(var b=[],c=a.parents,d,e=0,f=c.length;e<f;e++){d=P(c[e]);d=ka(d,a);if(""===d||!1===d){b=!1;break}b[e]=d}return b}function N(a){for(var b=!1,c=a.length,d=0;d<c;d++)if("hidden"==a[d].type||a[d].checked){b=a[d].value;break}return b}
function $a(a,b){var c=b.getElementsByTagName("SELECT")[0];if(null!==c){var d=c.value;!1===a.parentVals?(c.options.length=1,c.value="",E(c),""!==d&&r(jQuery(c),a.fieldKey)):(bb(c),S(a.formId),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_replace_lookup_field_options",parent_fields:a.parents,parent_vals:a.parentVals,field_id:a.fieldId,nonce:frm_js.nonce},success:function(d){var f=c.value;d=JSON.parse(d);for(var e=c.options.length;0<e;e--)c.remove(e);var g=d.length;for(e=0;e<g;e++)c.options[e+
1]=new Option(d[e],d[e],!1,!1);c.value=f;""===c.value&&(d=c.getAttribute("data-frmval"),null!==d&&(c.value=d));!1===a.isReadOnly&&(c.disabled=!1);c.className=c.className.replace(" frm_loading_lookup","");E(c);c.value!=f&&r(jQuery(c),a.fieldKey);ua(jQuery(b));T(a.formId)}}))}}function E(a){-1<a.className.indexOf("frm_chzn")&&jQuery().chosen&&jQuery(a).trigger("chosen:updated")}function bb(a){a.className+=" frm_loading_lookup";a.disabled=!0;E(a)}function S(a){u++;1===u&&(a=va(a),null!==a&&frmFrontForm.showSubmitLoading(jQuery(a)))}
function T(a){u--;0>=u&&(a=va(a),null!==a&&frmFrontForm.removeSubmitLoading(jQuery(a),"enable",u))}function va(a){return document.querySelector("#frm_form_"+a+"_container form")}function ab(a,b){var c=b.getElementsByClassName("frm_opt_container")[0],d=c.getElementsByTagName("input");cb(b,c);var e="";e="radio"==a.inputType?N(d):C(d);var f=jQuery(d[0]).data("frmval");S(a.formId);jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_replace_cb_radio_lookup_options",parent_fields:a.parents,parent_vals:a.parentVals,
field_id:a.fieldId,container_field_id:B(a),row_index:a.repeatRow,current_value:e,default_value:f,nonce:frm_js.nonce},success:function(e){c.innerHTML=e;e=b.getElementsByClassName("frm-loading-img")[0];null!==e&&void 0!==e&&e.parentNode.removeChild(e);c.style.display="block";1==d.length&&""===d[0].value?ra(a,b):(!1!==v(b.id,a.formId)&&(e=K(a.fieldId),!1===e||1>e.conditions.length?(y(b.id,a.formId),jQuery("#"+b.id).show()):(e.containerId=b.id,e.repeatRow=a.repeatRow,ea(e))),void 0!==f&&(!1!==("radio"==
a.inputType?N(d):C(d))||1>d.length||na(d[0].name,f)));r(jQuery(d[0]),a.fieldKey);ua(jQuery(b));T(a.formId)}})}function ua(a){a.trigger("frmLookupOptionsLoaded")}function ra(a,b){v(b.id,a.formId)||(jQuery("#"+b.id).hide(),pa(b.id,a.formId))}function ta(a,b){if(D(b,a.formId))U(b.id);else if(!1===a.parentVals){var c=b.getAttribute("data-frmval");null===c&&(c="");wa(a,b,c);U(b.id)}else S(a.formId),jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_get_lookup_text_value",parent_fields:a.parents,
parent_vals:a.parentVals,field_id:a.fieldId,nonce:frm_js.nonce},success:function(c){D(b,a.formId)||b.value==c||wa(a.fieldKey,b,c);T(a.formId);U(b.id)}})}function sa(a,b){var c=b.id;c in n?2<=n[c].length&&(n[c]=n[c].slice(0,1)):n[c]=[];n[c].push({childFieldArgs:a,childInput:b})}function U(a){n[a].shift();a in n&&0<n[a].length&&ta(n[a][0].childFieldArgs,n[a][0].childInput)}function wa(a,b,c){c=c.replace(/&amp;/g,"&");b.value=c;r(jQuery(b),a)}function Wa(a,b){if(b){var c=jQuery("#"+a.containerId);xa(c)}jQuery.ajax({type:"POST",
url:frm_js.ajax_url,data:{action:"frm_fields_ajax_get_data",entry_id:a.dataLogic.actualValue,current_field:a.fieldId,hide_id:a.containerId,on_current_page:b,nonce:frm_js.nonce},success:function(d){if(b){var e=c.find(".frm_opt_container, .frm_data_container");e.html(d);var f=e.children("input"),h=f.val();ya(e);""===d||""===h?L(a,!0):za(a,c,f,!0)}else e="field_"+a.fieldKey,""!==a.repeatRow&&(e+="-"+a.repeatRow),e=document.getElementById(e),e.value=d,v(a.containerId,a.formId)&&y(a.containerId,a.formId),
r(jQuery(e))}})}function Xa(a,b){var c=jQuery("#"+a.containerId),d=c.find('select[name^="item_meta"], input[name^="item_meta"]'),e=Aa(d);d=d.data("frmval");var f=c.closest("form").find('input[name="id"]').val();xa(c);jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_fields_ajax_data_options",trigger_field_id:a.dataLogic.fieldId,entry_id:a.dataLogic.actualValue,field_id:a.fieldId,default_value:d,container_id:a.containerId,editing_entry:f,prev_val:e,nonce:frm_js.nonce},success:function(b){var d=
c.find(".frm_opt_container, .frm_data_container");d.html(b);var f=d.find('select, input[type="checkbox"], input[type="radio"]');ya(d);""===b||1>f.length?L(a,!0):(b=Aa(f),za(a,c,f,e!==b))}})}function xa(a){var b=a.html();-1<b.indexOf("frm-loading-img")||(a.html(b+'<span class="frm-loading-img"></span>'),a.find(".frm_opt_container, .frm_data_container").hide())}function cb(a,b){if(!(-1<a.innerHTML.indexOf("frm-loading-img"))){b.style.display="none";var c=document.createElement("span");c.setAttribute("class",
"frm-loading-img");a.insertBefore(c,b.nextSibling)}}function ya(a){a.parent().children(".frm-loading-img").remove();a.show()}function Aa(a){var b=[],c="";a.each(function(){c=this.value;"radio"===this.type||"checkbox"===this.type?!0===this.checked&&b.push(c):""!==c&&b.push(c)});0===b.length&&(b="");return b}function za(a,b,c,d){v(a.containerId,a.formId)&&(y(a.containerId,a.formId),b.show());c.hasClass("frm_chzn")&&V();!0===d&&r(c)}function J(a,b){if("undefined"!==typeof __FRMCALC){var c=__FRMCALC,
d=c.fields[a];if("undefined"!==typeof d){d=d.total;for(var e=d.length,f=[],h=db(c.calc[d[0]]),g=0;g<e;g++){var k=h;if("undefined"!==typeof k.start||"undefined"!==typeof k.end){var l=jQuery('input[type=hidden][name*="['+c.calc[d[g]].field_id+']"]');if(l.length)if(l.closest(".frm_form_field").length)l=!0;else{var m=l.index(),p=!0,q=!0;"undefined"!==typeof k.start&&(p=jQuery(k.start).index()<m);"undefined"!==typeof k.end&&(q=jQuery(k.end).index()>m);(k=p&&q)||(k=0<l.closest(".do-calculation").length);
l=k}else l=!0}else l=!0;l&&(l=c.calc[d[g]],q=b.attr("name"),k=!1,m=l.field_id,p=z(l.form_id),1>p.length||("0"===l.inSection&&"0"===l.inEmbedForm?k=G(m,p):(q=w(q),G(m,p)?k=!0:Ba(m,q,p)?k=!0:"0"!==l.inSection&&"0"!==l.inEmbedForm?k=Ba(l.inSection,q,p):"0"!==l.inSection?k=G(l.inSection,p):"0"!==l.inEmbedForm&&(k=G(l.inEmbedForm,p)))),l=k,l=!1===l);l&&Q(c,d[g],f,b)}}}}function db(a){var b=a.form_id,c=document.getElementById("frm_form_"+b+"_container");if(null===c&&a.in_section){b=document.getElementById("frm_field_"+
a.in_section+"_container");if(null===b)return[];c=Ca(b,function(a){return"FORM"===a.tagName});b=c.elements.namedItem("form_id").value}a=c.getElementsByClassName("frm_next_page");b=document.getElementById("frm_page_order_"+b);c=[];0<a.length&&(c.start=a[0]);null!==b&&(c.end=b);return c}function Ca(a,b){return a&&(b(a)?a:Ca(a.parentNode,b))}function G(a,b){return-1<b.indexOf("frm_field_"+a+"_container")}function Ba(a,b,c){var d=!1;b.repeatingSection&&(a="frm_field_"+a+"-"+b.repeatingSection,a+="-"+
b.repeatRow+"_container",d=-1<c.indexOf(a));return d}function Q(a,b,c,d){var e=a.calc[b],f=e.calc,h=jQuery(document.getElementById("field_"+b)),g={triggerField:d,inSection:!1,thisFieldCall:'input[id^="field_'+b+'-"]'};1>h.length&&"undefined"!==typeof d&&(g.inSection=!0,g.thisFieldId=eb(a.fieldsWithCalc,b),h=Da(g));if(!(null===h||1>h.length)){f=fb(e,f,a,c,g);if("text"!=e.calc_type){a=e.calc_dec;-1<f.indexOf(").toFixed(")&&(c=f.split(").toFixed("),Ea(c[1])&&(a=c[1],f=f.replace(").toFixed("+a,"")));
f=gb(f);f=parseFloat(eval(f));if("undefined"===typeof f||isNaN(f))f=0;Ea(a)&&(f=f.toFixed(a))}h.val()!==f&&(h.val(f),null!==d&&"undefined"!==typeof d&&h.attr("name")==d.attr("name")||r(h,b))}}function fb(a,b,c,d,e){for(var f=0,h=a.fields.length;f<h;f++){var g={triggerField:e.triggerField,thisFieldId:a.fields[f],inSection:e.inSection,valKey:e.inSection+""+a.fields[f],thisField:c.fields[a.fields[f]],thisFieldCall:"input"+c.fieldKeys[a.fields[f]]},k=c;"checkbox"==g.thisField.type||"radio"==g.thisField.type||
"scale"==g.thisField.type||"star"==g.thisField.type?g.thisFieldCall=g.thisFieldCall+":checked,"+g.thisFieldCall+"[type=hidden]":"select"==g.thisField.type||"time"==g.thisField.type?g.thisFieldCall="select"+k.fieldKeys[g.thisFieldId]+" option:selected,"+g.thisFieldCall+"[type=hidden]":"textarea"==g.thisField.type&&(g.thisFieldCall=g.thisFieldCall+",textarea"+k.fieldKeys[g.thisFieldId]);if("text"==a.calc_type)g.valKey="text"+g.valKey,d=hb(g,d),"undefined"===typeof d[g.valKey]&&(d[g.valKey]="");else{g.valKey=
"num"+g.valKey;d=ib(g,c,d);if("undefined"===typeof d[g.valKey]||isNaN(d[g.valKey]))d[g.valKey]=0;"date"==g.thisField.type&&0===d[g.valKey]&&(b="")}k="["+g.thisFieldId+"]";k=k.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");b=b.replace(new RegExp(k,"g"),d[g.valKey])}return b}function gb(a){var b=a.charAt(a.length-1);if("+"===b||"-"===b)a=a.substr(0,a.length-1);return a}function A(a){return 3<=a.split("][").length}function ib(a,b,c){if("undefined"!==typeof c[a.valKey]&&0!==c[a.valKey])return c;c[a.valKey]=
0;var d=Fa(a);if(!1===d)return c;d.each(function(){var d=Ga(a.thisField,this);if("date"==a.thisField.type){var f=b.date;var h=0;if(d)if("undefined"===typeof jQuery.datepicker){h="-";-1<f.indexOf("/")&&(h="/");f=f.split(h);d=d.split(h);var g;var k=h=g="";for(var l=0;l<f.length;l++)if("y"==f[l])k=((new Date).getFullYear()+15).toString().substr(2,2),k=d[l]>k?"19"+d[l]:"20"+d[l];else if("yy"==f[l])k=d[l];else if("m"==f[l]||"mm"==f[l])h=d[l],2>h.length&&(h="0"+h);else if("d"==f[l]||"dd"==f[l])g=d[l],2>
g.length&&(g="0"+g);h=Date.parse(k+"-"+h+"-"+g)}else h=jQuery.datepicker.parseDate(f,d);f=h;null!==f&&(c[a.valKey]=Math.ceil(f/864E5))}else{f=d;""!==f&&0!==f&&(f=f.trim(),f=parseFloat(f.replace(/,/g,"").match(/-?[\d\.]+$/)));if("undefined"===typeof f||isNaN(f)||""===f)f=0;c[a.valKey]+=f}});return c}function hb(a,b){if("undefined"!==typeof b[a.valKey]&&""!==b[a.valKey])return b;b[a.valKey]="";var c=Fa(a);if(!1===c)return b;var d=0,e="";c.each(function(){var c=Ga(a.thisField,this);c=c.trim();var h=
d,g="";0<h&&("time"==a.thisField.type?1==h?g=":":2==h&&(g=" "):g=", ",h=jQuery(document).triggerHandler("frmCalSeparation",[a.thisField,h]),"undefined"!==typeof h&&(g=h));e=g;""!==c&&(b[a.valKey]+=e+c,d++)});return b}function Fa(a){a=!1===a.inSection?jQuery(a.thisFieldCall):Da(a);if(null===a||"undefined"===typeof a||1>a.length)a=!1;return a}function Da(a){if("undefined"===typeof a.triggerField)return null;var b=a.triggerField.closest(".frm_repeat_sec, .frm_repeat_inline, .frm_repeat_grid");var c=
w(a.triggerField.attr("name"));var d=a.thisFieldCall.replace("[id=","[id^=").replace(/-"]/g,"-"+c.repeatRow+'"]');if(b.length||""!==c.repeatRow){if(c=b.length?b.find(d):jQuery(d),null===c||"undefined"===typeof c||1>c.length)c=null,d.indexOf(":checked")?1>b.find(d.replace(":checked","")).length&&(c=jQuery(a.thisFieldCall)):c=jQuery(a.thisFieldCall)}else c=jQuery(a.thisFieldCall);return c}function Ga(a,b){var c=!1;if("hidden"==b.type)""!==W(b)&&(c=!0);else if("select"==a.type){var d=b.className;d&&
-1<d.indexOf("frm_other_trigger")&&(c=!0)}else("checkbox"==a.type||"radio"==a.type)&&-1<b.id.indexOf("-other_")&&0>b.id.indexOf("-otext")&&(c=!0);c?(c=0,"select"==a.type?"hidden"==b.type?(d=!1,2<b.name.split("[").length&&(d=!0),d||(c=W(b))):c=jQuery(b).closest(".frm_other_container").find(".frm_other_input").val():"checkbox"!=a.type&&"radio"!=a.type||"hidden"==b.type||(c=W(b))):c="checkbox"===b.type||"radio"===b.type?b.checked?b.value:b.dataset.off:jQuery(b).val();"undefined"===typeof c&&(c="");return c}
function W(a){var b="";a=document.getElementById(a.id+"-otext");null!==a&&""!==a.value&&(b=a.value);return b}function jb(a,b){X("pageLoad");var c=jQuery(b).find('input[name="id"]');c.length&&(c=document.getElementById("frm_edit_"+c.val()),null!==c&&-1<c.className.indexOf("frm_cancel_edit")&&Ha(jQuery(c)));H()}function kb(){H()}function lb(a,b){google.load("visualization","1.0",{packages:[b],callback:function(){var b=new google.visualization.DataTable,d=!1;-1!==jQuery.inArray("id",a.options.fields)&&
(d=!0,b.addColumn("number",frm_js.id));for(var e=a.fields.length,f,h=0,g=e;h<g;h++){var k=a.fields[h];f=Ia(k);b.addColumn(f,k.name)}h=!1;a.options.edit_link&&(h=!0,b.addColumn("string",a.options.edit_link));g=!1;a.options.delete_link&&(g=!0,b.addColumn("string",a.options.delete_link));if(null!==a.entries){var l=a.entries.length;b.addRows(l);for(var m=0,p=0;p<l;p++){k=0;var q=a.entries[p];d&&(b.setCell(m,k,q.id),k++);for(var n=0,r=e;n<r;n++){var t=a.fields[n];f=Ia(t);t=q.metas[t.id];"number"!=f||null!==
t&&""!==t?"boolean"==f&&(t=null===t||"false"==t||!1===t?!1:!0):t=0;b.setCell(m,k,t);k++}h&&("undefined"!==typeof q.editLink?b.setCell(m,k,'<a href="'+q.editLink+'">'+a.options.edit_link+"</a>"):b.setCell(m,k,""),k++);g&&("undefined"!==typeof q.deleteLink?b.setCell(m,k,'<a href="'+q.deleteLink+'" class="frm_delete_link" data-frmconfirm="'+a.options.confirm+'">'+a.options.delete_link+"</a>"):b.setCell(m,k,""));m++}}else for(b.addRows(1),h=k=0,g=e;h<g;h++)0<k?b.setCell(0,k,""):b.setCell(0,k,a.options.no_entries),
k++;(new google.visualization.Table(document.getElementById("frm_google_table_"+a.options.form_id))).draw(b,a.graphOpts)}})}function mb(a){google.load("visualization","1.0",{packages:[a["package"]],callback:function(){new google.visualization.DataTable;var b=google.visualization.arrayToDataTable(a.data);var c=document.getElementById("chart_"+a.graph_id);if(null!==c){var d=a.type.charAt(0).toUpperCase()+a.type.slice(1);"Histogram"!==d&&"Table"!==d&&(d+="Chart");c=new google.visualization[d](c);c.draw(b,
a.options);jQuery(document).trigger("frmDrawChart",[c,"chart_"+a.graph_id,b])}}})}function Ia(a){var b="string";if("number"==a.type)b="number";else if("checkbox"==a.type||"select"==a.type){var c=a.options.length;"select"==a.type&&""===a.options[0]&&(c="post_status"==a.field_options.post_field?3:c-1);1==c&&(b="boolean")}return b}function nb(){var a=jQuery(this).data("key"),b=jQuery(this).data("parent"),c="frm_section_"+b+"-"+a,d=jQuery(document.getElementById(c)),e=d.find("input, select, textarea"),
f=jQuery(this).closest("form").find('input[name="form_id"]').val();d.fadeOut("slow",function(){d.remove();e.each(function(){var c=frmFrontForm.getFieldId(this,!1);"file"!=this.type&&J(c,jQuery(this));y("frm_field_"+c+"-"+b+"-"+a+"_container",f)});jQuery("#frm_field_"+b+"_container .frm_add_form_row.frm_button").removeClass("frm_hide_add_button");"function"==typeof frmThemeOverride_frmRemoveRow&&frmThemeOverride_frmRemoveRow(c,d);jQuery(document).trigger("frmAfterRemoveRow")});return!1}function ob(){if(!0===
I)return!1;I=!0;var a=jQuery(this).data("parent"),b=0,c=jQuery(".frm_repeat_"+a).length;if(0<c){var d=jQuery(".frm_repeat_"+a+":last").attr("id").replace("frm_section_"+a+"-","");b=-1<d.indexOf("i")?1:1+parseInt(d)}jQuery.ajax({type:"POST",url:frm_js.ajax_url,dataType:"json",data:{action:"frm_add_form_row",field_id:a,i:b,numberOfSections:c,nonce:frm_js.nonce},success:function(c){if(c.html){var d=c.html,e=jQuery(d).addClass("frm-fade-in");jQuery(".frm_repeat_"+a+":last").after(e);c.is_repeat_limit_reached&&
jQuery("#frm_field_"+a+"_container .frm_add_form_row.frm_button").addClass("frm_hide_add_button");var g=["other"],k,l,m={repeatingSection:a.toString(),repeatRow:b.toString()};jQuery(d).find("input, select, textarea").each(function(){if("file"!=this.type){if(""===this.name)return!0;k=this.name.replace("item_meta[","").split("]")[2].replace("[","");-1==jQuery.inArray(k,g)&&!1!==this.id&&""!==this.id&&(l=jQuery("#"+this.id),g.push(k),x(k,m),R(k,m,"value changed"),ba(k,l),ca(k,l,"value changed"),J(k,
l))}});jQuery(d).find(".frm_html_container").each(function(){var a=this.id.replace("frm_field_","").split("-")[0];g.push(a);x(a,m)});Z(m.repeatRow);Ja();V()}"function"==typeof frmThemeOverride_frmAddRow&&frmThemeOverride_frmAddRow(a,c);jQuery(document).trigger("frmAfterAddRow");I=!1},error:function(){I=!1}});return!1}function pb(){var a=jQuery(this),b=a.data("entryid"),c=a.data("prefix"),d=a.data("pageid"),e=a.data("formid"),f=a.data("cancel"),h=a.data("fields"),g=a.data("excludefields"),k=jQuery(document.getElementById(c+
b)),l=k.html();k.html('<span class="frm-loading-img" id="'+c+b+'"></span><div class="frm_orig_content" style="display:none">'+l+"</div>");jQuery.ajax({type:"POST",url:frm_js.ajax_url,dataType:"html",data:{action:"frm_entries_edit_entry_ajax",post_id:d,entry_id:b,id:e,nonce:frm_js.nonce,fields:h,exclude_fields:g},success:function(d){k.children(".frm-loading-img").replaceWith(d);a.removeClass("frm_inplace_edit").addClass("frm_cancel_edit");a.html(f);X("editInPlace");if("function"===typeof frmFrontForm.fieldValueChanged)jQuery(document).on("change",
'.frm-show-form input[name^="item_meta"], .frm-show-form select[name^="item_meta"], .frm-show-form textarea[name^="item_meta"]',frmFrontForm.fieldValueChanged);H(c+b)}});return!1}function qb(){var a=jQuery(this),b=a.data("prefix"),c=a.data("entryid");b=jQuery(document.getElementById(b+c));b.children(".frm_forms").replaceWith("");b.children(".frm_orig_content").fadeIn("slow").removeClass("frm_orig_content");Ha(a)}function Ha(a){var b=a.data("edit");a.removeClass("frm_cancel_edit").addClass("frm_inplace_edit");
a.html(b)}function rb(){var a=jQuery(this),b=a.data("deleteconfirm");if(confirm(b)){var c=a.data("entryid"),d=a.data("prefix");a.replaceWith('<span class="frm-loading-img" id="frm_delete_'+c+'"></span>');jQuery.ajax({type:"POST",url:frm_js.ajax_url,data:{action:"frm_entries_destroy",entry:c,nonce:frm_js.nonce},success:function(a){if("success"==a.replace(/^\s+|\s+$/g,"")){var b=jQuery(document.getElementById(d+c));b.fadeOut("slow",function(){b.remove()});jQuery(document.getElementById("frm_delete_"+
c)).fadeOut("slow");jQuery(document).trigger("frmEntryDeleted",[c])}else jQuery(document.getElementById("frm_delete_"+c)).replaceWith(a)}})}return!1}function sb(){for(var a=__frmUniqueTimes,b=0;b<a.length;b++)a[b].dateID==this.id&&frmProForm.removeUsedTimes(this,a[b].timeID)}function H(a){"undefined"!==typeof __frmHideFields&&frmProForm.hidePreviouslyHiddenFields();jQuery(document).on("focusin",".frm_date",Oa);if("undefined"!==typeof __frmUniqueTimes)for(var b=__frmUniqueTimes,c=0;c<b.length;c++)jQuery(document.getElementById(b[c].dateID)).change(sb);
if("undefined"!==typeof __frmMasks)for(b=__frmMasks,c=0;c<b.length;c++)jQuery(b[c].trigger).attr("data-frmmask",b[c].mask);Ja();V(a);"undefined"!==typeof __frmDepDynamicFields&&frmProForm.checkDependentDynamicFields(__frmDepDynamicFields);"undefined"!==typeof __frmDepLookupFields&&frmProForm.checkDependentLookupFields(__frmDepLookupFields);if("undefined"!==typeof __FRMCALC){(a=__FRMCALC.triggers)&&jQuery(a.join()).trigger({type:"change",selfTriggered:!0});a=__FRMCALC.calc;b=[];for(var d in a)1>a[d].fields.length&&
(c=document.getElementById("field_"+d),null===c||D(c,a[d].form_id)||Q(__FRMCALC,d,b))}Z()}function V(a){if(jQuery().chosen){var b={allow_single_deselect:!0,no_results_text:frm_js.no_results,search_contains:!0};"undefined"!==typeof __frmChosen&&(b="{"+__frmChosen+"}");"undefined"!==typeof a?jQuery("#"+a).find(".frm_chzn").chosen(b):jQuery(".frm_chzn").chosen(b)}}function tb(){Ka(this)}function ub(){Ka(this.previousSibling)}function Ka(a){var b=a.parentElement;b.className+=" frm-star-hovered";b=b.childNodes;
a=parseInt(a.value);for(var c=!1,d=0;d<b.length;d++)"undefined"!==typeof b[d].className&&-1<b[d].className.indexOf("star-rating")?c?b[d].className+=" star-rating-hover":b[d].classList.remove("star-rating-hover","star-rating-on"):c=parseInt(b[d].value)<=a}function vb(){var a=this.previousSibling.parentElement;a.classList.remove("frm-star-hovered");var b=a.childNodes;a=jQuery(a).find("input:checked").attr("id");for(var c="",d=b.length-1;0<d;d--)"undefined"!==typeof b[d].className&&-1<b[d].className.indexOf("star-rating")&&
(b[d].classList.remove("star-rating-hover"),""===c&&"undefined"!==typeof a&&b[d].getAttribute("for")==a&&(c=" star-rating-on"),""!==c&&(b[d].className+=c))}function Ja(){jQuery(document).on("input","input[data-frmrange]",function(){var a=jQuery(this);a.next(".frm_range_value").html(a.val())})}function wb(){var a,b=jQuery(".frm_inline_form .frm_fields_container");if(b.length)for(a=0;a<b.length;a++){var c=jQuery(b[a]);var d=c.children(".frm_form_field");if(12>=d.length&&!La(d.last())){var e=d;var f=
Math.max(2,Math.ceil(12/(e.length+1)));for(d=0;d<e.length;d++)La(jQuery(e[d]))||jQuery(e[d]).addClass("frm"+f);c.children(".frm_submit").addClass("frm"+f)}}}function La(a){var b,c=a.attr("class"),d="frm_full half third fourth fifth sixth seventh eighth".split(" ");for(b=1;12>=b;b++){if(a.hasClass("frm"+b))return!0;if(12===b)for(var e=0;e<d.length;e++){if(c.includes(d[e]))return!0;if(e===d.length-1)return!1}}}function X(a){"undefined"!==typeof __frmHideOrShowFields?frmProForm.hideOrShowFields(__frmHideOrShowFields,
a):Ma()}function Ma(){jQuery(".frm_pro_form").fadeIn("slow")}function r(a,b){"undefined"===typeof b&&(b="dependent");1<a.length&&(a=a.eq(0));a.trigger({type:"change",selfTriggered:!0,frmTriggered:b})}function w(a){var b={repeatingSection:"",repeatRow:""};"undefined"!==typeof a&&A(a)&&(a=a.split("]["),b.repeatingSection=a[0].replace("item_meta[",""),b.repeatRow=a[1]);return b}function Ra(a){a.fadeOut("slow",function(){a.remove()})}function eb(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c;
return null}function Ea(a){return!jQuery.isArray(a)&&0<=a-parseFloat(a)+1}var I=!1,Va="",u=0,n={};return{init:function(){jQuery(document).on("frmFormComplete",jb);jQuery(document).on("frmPageChanged",kb);jQuery(document).on("click",".frm_trigger",Na);var a=jQuery(".frm_blank_field");a.length&&a.closest(".frm_toggle_container").prev(".frm_trigger").click();jQuery(document).on("click",".frm_remove_link",Qa);jQuery(document).on("focusin","input[data-frmmask]",function(){jQuery(this).mask(jQuery(this).data("frmmask").toString(),
{autoclear:!1})});jQuery(document).on("frmFieldChanged",Ta);jQuery(document).on("mouseenter click",".frm-star-group input",tb);jQuery(document).on("mouseenter",".frm-star-group .star-rating:not(.star-rating-readonly)",ub);jQuery(document).on("mouseleave",".frm-star-group .star-rating:not(.star-rating-readonly)",vb);jQuery(document).on("click",'.frm-show-form input[type="submit"], .frm-show-form input[name="frm_prev_page"], .frm_page_back, .frm_page_skip, .frm-show-form .frm_save_draft, .frm_prev_page, .frm_button_submit',
Y);jQuery(document).on("change",'.frm_other_container input[type="checkbox"], .frm_other_container input[type="radio"], .frm_other_container select',Sa);jQuery(document).on("click",".frm_remove_form_row",nb);jQuery(document).on("click",".frm_add_form_row",ob);jQuery(".frm_edit_link_container").on("click","a.frm_inplace_edit",pb);jQuery(".frm_edit_link_container").on("click","a.frm_cancel_edit",qb);jQuery(document).on("click",".frm_ajax_delete",rb);jQuery(".frm_month_heading, .frm_year_heading").click(function(){var a=
jQuery(this).children(".ui-icon-triangle-1-e, .ui-icon-triangle-1-s");a.hasClass("ui-icon-triangle-1-e")?(a.addClass("ui-icon-triangle-1-s").removeClass("ui-icon-triangle-1-e"),jQuery(this).next(".frm_toggle_container").fadeIn("slow")):(a.addClass("ui-icon-triangle-1-e").removeClass("ui-icon-triangle-1-s"),jQuery(this).next(".frm_toggle_container").hide())});wb();X("pageLoad");H()},savingDraft:function(a){var b=!1;a=jQuery(a).find(".frm_saving_draft");a.length&&(b=a.val());return b},goingToPreviousPage:function(a){var b=
!1,c=jQuery(a).find(".frm_next_page");if(c.length&&c.val()){var d=jQuery(a).find('input[name="form_id"]').val();a=jQuery(a).find('input[name="frm_page_order_'+d+'"]');a=a.length?a.val():0;if(!a||c.val()<a)b=!0}return b},hideOrShowFields:function(a,b){if("pageLoad"===b){var c=document.querySelectorAll('[id^="frm_hide_fields_"]');F(c)}c={repeatingSection:"",repeatRow:""};for(var d=0,e=a.length;d<e;d++)x(a[d],c),d==e-1&&Ma()},hidePreviouslyHiddenFields:function(){var a=[];for(var b=document.querySelectorAll('*[id^="frm_hide_fields_"]'),
c=b.length,d,e=0;e<c;e++)d=b[e].id.replace("frm_hide_fields_",""),a=a.concat(z(d));b=0;for(c=a.length;b<c;b++)d=document.getElementById(a[b]),null!==d&&(d.style.display="none")},checkDependentDynamicFields:function(a){for(var b={repeatingSection:"",repeatRow:""},c=0,d=a.length;c<d;c++)x(a[c],b)},checkDependentLookupFields:function(a){for(var b,c={repeatingSection:"",repeatRow:""},d=0,e=a.length;d<e;d++)b=a[d],R(b,c,"value changed")},loadGoogle:function(){if("undefined"!==typeof google&&google&&google.load)for(var a=
__FRMTABLES,b=Object.keys(a),c=0;c<b.length;c++)if("graphs"===b[c])for(var d=a[b[c]],e=0,f=d.length;e<f;e++)mb(d[e]);else for(d=a[b[c]],e=b[c],f=0;f<d.length;f++)lb(d[f],e);else setTimeout(frmFrontForm.loadGoogle,30)},removeUsedTimes:function(a,b){var c=jQuery(a).parents("form:first").find('input[name="id"]');jQuery.ajax({type:"POST",url:frm_js.ajax_url,dataType:"json",data:{action:"frm_fields_ajax_time_options",time_field:b,date_field:a.id,entry_id:c?c.val():"",date:jQuery(a).val(),nonce:frm_js.nonce},
success:function(a){var c=jQuery(document.getElementById(b));c.find("option").removeAttr("disabled");if(0<a.length)for(var d=0,h=a.length;d<h;d++)c.find('option[value="'+a[d]+'"]').attr("disabled","disabled")}})}}}var frmProForm=frmProFormJS();jQuery(document).ready(function(Y){frmProForm.init()});
(function(){var u=[].slice,z={}.hasOwnProperty,A=function(e,b){function m(){this.constructor=e}for(var h in b)z.call(b,h)&&(e[h]=b[h]);m.prototype=b.prototype;e.prototype=new m;e.__super__=b.prototype;return e};var n=function(){};var x=function(){function e(){}e.prototype.addEventListener=e.prototype.on;e.prototype.on=function(b,e){this._callbacks=this._callbacks||{};this._callbacks[b]||(this._callbacks[b]=[]);this._callbacks[b].push(e);return this};e.prototype.emit=function(){var b,e;var h=arguments[0];
var a=2<=arguments.length?u.call(arguments,1):[];this._callbacks=this._callbacks||{};if(b=this._callbacks[h]){var c=0;for(e=b.length;c<e;c++)h=b[c],h.apply(this,a)}return this};e.prototype.removeListener=e.prototype.off;e.prototype.removeAllListeners=e.prototype.off;e.prototype.removeEventListener=e.prototype.off;e.prototype.off=function(b,e){var h,a;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var c=this._callbacks[b];if(!c)return this;if(1===arguments.length)return delete this._callbacks[b],
this;var k=h=0;for(a=c.length;h<a;k=++h){var d=c[k];if(d===e){c.splice(k,1);break}}return this};return e}();var l=function(e){function b(a,c){var k,d;this.element=a;this.version=b.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];"string"===typeof this.element&&(this.element=document.querySelector(this.element));if(!this.element||null==this.element.nodeType)throw Error("Invalid dropzone element.");
if(this.element.dropzone)throw Error("Dropzone already attached.");b.instances.push(this);this.element.dropzone=this;var f=null!=(d=b.optionsForElement(this.element))?d:{};this.options=m({},this.defaultOptions,f,null!=c?c:{});if(this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);null==this.options.url&&(this.options.url=this.element.getAttribute("action"));if(!this.options.url)throw Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");
this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes);this.options.method=this.options.method.toUpperCase();(k=this.getExistingFallback())&&k.parentNode&&k.parentNode.removeChild(k);!1!==this.options.previewsContainer&&(this.previewsContainer=this.options.previewsContainer?b.getElement(this.options.previewsContainer,"previewsContainer"):this.element);this.options.clickable&&(this.clickableElements=!0===this.options.clickable?
[this.element]:b.getElements(this.options.clickable,"clickable"));this.init()}A(b,e);b.prototype.Emitter=x;b.prototype.events="drop dragstart dragend dragenter dragover dragleave addedfile addedfiles removedfile thumbnail error errormultiple processing processingmultiple uploadprogress totaluploadprogress sending sendingmultiple success successmultiple canceled canceledmultiple complete completemultiple reset maxfilesexceeded maxfilesreached queuecomplete".split(" ");b.prototype.defaultOptions={url:null,
method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1E3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",
dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",
accept:function(a,c){return c()},init:function(){return n},forceFallback:!1,fallback:function(){var a;this.element.className=""+this.element.className+" dz-browser-not-supported";var c=this.element.getElementsByTagName("div");var k=0;for(a=c.length;k<a;k++){var d=c[k];if(/(^| )dz-message($| )/.test(d.className)){var f=d;d.className="dz-message"}}f||(f=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(f));if(d=f.getElementsByTagName("span")[0])null!=d.textContent?
d.textContent=this.options.dictFallbackMessage:null!=d.innerText&&(d.innerText=this.options.dictFallbackMessage);return this.element.appendChild(this.getFallbackForm())},resize:function(a){var c={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height};var k=a.width/a.height;c.optWidth=this.options.thumbnailWidth;c.optHeight=this.options.thumbnailHeight;null==c.optWidth&&null==c.optHeight?(c.optWidth=c.srcWidth,c.optHeight=c.srcHeight):null==c.optWidth?c.optWidth=k*c.optHeight:null==c.optHeight&&(c.optHeight=
1/k*c.optWidth);var b=c.optWidth/c.optHeight;a.height<c.optHeight||a.width<c.optWidth?(c.trgHeight=c.srcHeight,c.trgWidth=c.srcWidth):k>b?(c.srcHeight=a.height,c.srcWidth=c.srcHeight*b):(c.srcWidth=a.width,c.srcHeight=c.srcWidth/b);c.srcX=(a.width-c.srcWidth)/2;c.srcY=(a.height-c.srcHeight)/2;return c},drop:function(a){return this.element.classList.remove("dz-drag-hover")},dragstart:n,dragend:function(a){return this.element.classList.remove("dz-drag-hover")},dragenter:function(a){return this.element.classList.add("dz-drag-hover")},
dragover:function(a){return this.element.classList.add("dz-drag-hover")},dragleave:function(a){return this.element.classList.remove("dz-drag-hover")},paste:n,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var c;this.element===this.previewsContainer&&this.element.classList.add("dz-started");if(this.previewsContainer){a.previewElement=b.createElement(this.options.previewTemplate.trim());a.previewTemplate=a.previewElement;this.previewsContainer.appendChild(a.previewElement);
var k=a.previewElement.querySelectorAll("[data-dz-name]");var d=0;for(c=k.length;d<c;d++){var f=k[d];f.textContent=this._renameFilename(a.name)}k=a.previewElement.querySelectorAll("[data-dz-size]");d=0;for(c=k.length;d<c;d++)f=k[d],f.innerHTML=this.filesize(a.size);this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink));f=function(c){return function(k){k.preventDefault();
k.stopPropagation();return a.status===b.UPLOADING?b.confirm(c.options.dictCancelUploadConfirmation,function(){return c.removeFile(a)}):c.options.dictRemoveFileConfirmation?b.confirm(c.options.dictRemoveFileConfirmation,function(){return c.removeFile(a)}):c.removeFile(a)}}(this);var g=a.previewElement.querySelectorAll("[data-dz-remove]");var v=[];c=0;for(k=g.length;c<k;c++)d=g[c],v.push(d.addEventListener("click",f));return v}},removedfile:function(a){var c;a.previewElement&&null!=(c=a.previewElement)&&
c.parentNode.removeChild(a.previewElement);return this._updateMaxFilesReachedClass()},thumbnail:function(a,c){var k;if(a.previewElement){a.previewElement.classList.remove("dz-file-preview");var b=a.previewElement.querySelectorAll("[data-dz-thumbnail]");var f=0;for(k=b.length;f<k;f++){var g=b[f];g.alt=a.name;g.src=c}return setTimeout(function(c){return function(){return a.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(a,c){var b;if(a.previewElement){a.previewElement.classList.add("dz-error");
"String"!==typeof c&&c.error&&(c=c.error);var d=a.previewElement.querySelectorAll("[data-dz-errormessage]");var f=[];var g=0;for(b=d.length;g<b;g++){var v=d[g];f.push(v.textContent=c)}return f}},errormultiple:n,processing:function(a){if(a.previewElement&&(a.previewElement.classList.add("dz-processing"),a._removeLink))return a._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:n,uploadprogress:function(a,c,b){var k;if(a.previewElement){var f=a.previewElement.querySelectorAll("[data-dz-uploadprogress]");
var g=[];b=0;for(k=f.length;b<k;b++)a=f[b],"PROGRESS"===a.nodeName?g.push(a.value=c):g.push(a.style.width=""+c+"%");return g}},totaluploadprogress:n,sending:n,sendingmultiple:n,success:function(a){if(a.previewElement)return a.previewElement.classList.add("dz-success")},successmultiple:n,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:n,complete:function(a){a._removeLink&&(a._removeLink.textContent=this.options.dictRemoveFile);if(a.previewElement)return a.previewElement.classList.add("dz-complete")},
completemultiple:n,maxfilesexceeded:n,maxfilesreached:n,queuecomplete:n,addedfiles:n,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'};
var m=function(){var a,c;var b=arguments[0];var d=2<=arguments.length?u.call(arguments,1):[];var f=0;for(c=d.length;f<c;f++){var g=d[f];for(a in g){var v=g[a];b[a]=v}}return b};b.prototype.getAcceptedFiles=function(){var a;var c=this.files;var b=[];var d=0;for(a=c.length;d<a;d++){var f=c[d];f.accepted&&b.push(f)}return b};b.prototype.getRejectedFiles=function(){var a;var c=this.files;var b=[];var d=0;for(a=c.length;d<a;d++){var f=c[d];f.accepted||b.push(f)}return b};b.prototype.getFilesWithStatus=
function(a){var c;var b=this.files;var d=[];var f=0;for(c=b.length;f<c;f++){var g=b[f];g.status===a&&d.push(g)}return d};b.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(b.QUEUED)};b.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(b.UPLOADING)};b.prototype.getAddedFiles=function(){return this.getFilesWithStatus(b.ADDED)};b.prototype.getActiveFiles=function(){var a;var c=this.files;var k=[];var d=0;for(a=c.length;d<a;d++){var f=c[d];f.status!==b.UPLOADING&&
f.status!==b.QUEUED||k.push(f)}return k};b.prototype.init=function(){var a,c;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data");this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"));if(this.clickableElements.length){var k=function(a){return function(){a.hiddenFileInput&&a.hiddenFileInput.parentNode.removeChild(a.hiddenFileInput);
a.hiddenFileInput=document.createElement("input");a.hiddenFileInput.setAttribute("type","file");(null==a.options.maxFiles||1<a.options.maxFiles)&&a.hiddenFileInput.setAttribute("multiple","multiple");a.hiddenFileInput.className="dz-hidden-input";null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles);null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture);a.hiddenFileInput.style.visibility="hidden";a.hiddenFileInput.style.position=
"absolute";a.hiddenFileInput.style.top="0";a.hiddenFileInput.style.left="0";a.hiddenFileInput.style.height="0";a.hiddenFileInput.style.width="0";document.querySelector(a.options.hiddenInputContainer).appendChild(a.hiddenFileInput);return a.hiddenFileInput.addEventListener("change",function(){var c;var b=a.hiddenFileInput.files;if(b.length){var d=0;for(c=b.length;d<c;d++){var f=b[d];a.addFile(f)}}a.emit("addedfiles",b);return k()})}}(this);k()}this.URL=null!=(a=window.URL)?a:window.webkitURL;var d=
this.events;var f=0;for(c=d.length;f<c;f++)a=d[f],this.on(a,this.options[a]);this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this));this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this));this.on("canceled",function(a){return function(c){return a.emit("complete",c)}}(this));this.on("complete",function(a){return function(c){if(0===a.getAddedFiles().length&&0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length)return setTimeout(function(){return a.emit("queuecomplete")},
0)}}(this));var g=function(a){a.stopPropagation();return a.preventDefault?a.preventDefault():a.returnValue=!1};this.listeners=[{element:this.element,events:{dragstart:function(a){return function(c){return a.emit("dragstart",c)}}(this),dragenter:function(a){return function(c){g(c);return a.emit("dragenter",c)}}(this),dragover:function(a){return function(c){try{var b=c.dataTransfer.effectAllowed}catch(G){}c.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy";g(c);return a.emit("dragover",
c)}}(this),dragleave:function(a){return function(c){return a.emit("dragleave",c)}}(this),drop:function(a){return function(c){g(c);return a.drop(c)}}(this),dragend:function(a){return function(c){return a.emit("dragend",c)}}(this)}}];this.clickableElements.forEach(function(a){return function(c){return a.listeners.push({element:c,events:{click:function(d){(c!==a.element||d.target===a.element||b.elementInside(d.target,a.element.querySelector(".dz-message")))&&a.hiddenFileInput.click();return!0}}})}}(this));
this.enable();return this.options.init.call(this)};b.prototype.destroy=function(){var a;this.disable();this.removeAllFiles(!0);null!=(a=this.hiddenFileInput)&&a.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null);delete this.element.dropzone;return b.instances.splice(b.instances.indexOf(this),1)};b.prototype.updateTotalUploadProgress=function(){var a,c;var b=a=0;if(this.getActiveFiles().length){var d=this.getActiveFiles();var f=0;for(c=d.length;f<
c;f++){var g=d[f];a+=g.upload.bytesSent;b+=g.upload.total}g=100*a/b}else g=100;return this.emit("totaluploadprogress",g,b,a)};b.prototype._getParamName=function(a){return"function"===typeof this.options.paramName?this.options.paramName(a):""+this.options.paramName+(this.options.uploadMultiple?"["+a+"]":"")};b.prototype._renameFilename=function(a){return"function"!==typeof this.options.renameFilename?a:this.options.renameFilename(a)};b.prototype.getFallbackForm=function(){var a;if(a=this.getExistingFallback())return a;
a='<div class="dz-fallback">';this.options.dictFallbackText&&(a+="<p>"+this.options.dictFallbackText+"</p>");a+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';a=b.createElement(a);if("FORM"!==this.element.tagName){var c=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');c.appendChild(a)}else this.element.setAttribute("enctype",
"multipart/form-data"),this.element.setAttribute("method",this.options.method);return null!=c?c:a};b.prototype.getExistingFallback=function(){var a;var c=function(a){var c;var b=0;for(c=a.length;b<c;b++){var d=a[b];if(/(^| )fallback($| )/.test(d.className))return d}};var b=["div","form"];var d=0;for(a=b.length;d<a;d++){var f=b[d];if(f=c(this.element.getElementsByTagName(f)))return f}};b.prototype.setupEventListeners=function(){var a,c,b;var d=this.listeners;var f=[];var g=0;for(b=d.length;g<b;g++){var e=
d[g];f.push(function(){var b=e.events;var d=[];for(a in b)c=b[a],d.push(e.element.addEventListener(a,c,!1));return d}())}return f};b.prototype.removeEventListeners=function(){var a,c,b;var d=this.listeners;var f=[];var g=0;for(b=d.length;g<b;g++){var e=d[g];f.push(function(){var b=e.events;var d=[];for(a in b)c=b[a],d.push(e.element.removeEventListener(a,c,!1));return d}())}return f};b.prototype.disable=function(){var a;this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")});
this.removeEventListeners();var c=this.files;var b=[];var d=0;for(a=c.length;d<a;d++){var f=c[d];b.push(this.cancelUpload(f))}return b};b.prototype.enable=function(){this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")});return this.setupEventListeners()};b.prototype.filesize=function(a){var c,b;var d=0;var f="b";if(0<a){var g=["TB","GB","MB","KB","b"];var e=c=0;for(b=g.length;c<b;e=++c){var h=g[e];var m=Math.pow(this.options.filesizeBase,4-e)/10;if(a>=m){d=a/Math.pow(this.options.filesizeBase,
4-e);f=h;break}}d=Math.round(10*d)/10}return"<strong>"+d+"</strong> "+f};b.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")};b.prototype.drop=function(a){if(a.dataTransfer){this.emit("drop",a);var c=a.dataTransfer.files;
this.emit("addedfiles",c);c.length&&((a=a.dataTransfer.items)&&a.length&&null!=a[0].webkitGetAsEntry?this._addFilesFromItems(a):this.handleFiles(c))}};b.prototype.paste=function(a){var c;if(null!=(null!=a?null!=(c=a.clipboardData)?c.items:void 0:void 0)&&(this.emit("paste",a),a=a.clipboardData.items,a.length))return this._addFilesFromItems(a)};b.prototype.handleFiles=function(a){var c;var b=[];var d=0;for(c=a.length;d<c;d++){var f=a[d];b.push(this.addFile(f))}return b};b.prototype._addFilesFromItems=
function(a){var c,b;var d=[];var f=0;for(b=a.length;f<b;f++){var e=a[f];null!=e.webkitGetAsEntry&&(c=e.webkitGetAsEntry())?c.isFile?d.push(this.addFile(e.getAsFile())):c.isDirectory?d.push(this._addFilesFromDirectory(c,c.name)):d.push(void 0):null!=e.getAsFile?null==e.kind||"file"===e.kind?d.push(this.addFile(e.getAsFile())):d.push(void 0):d.push(void 0)}return d};b.prototype._addFilesFromDirectory=function(a,c){var b=a.createReader();var d=function(a){return"undefined"!==typeof console&&null!==console?
"function"===typeof console.log?console.log(a):void 0:void 0};var f=function(a){return function(){return b.readEntries(function(b){var d;if(0<b.length){var k=0;for(d=b.length;k<d;k++){var e=b[k];e.isFile?e.file(function(b){if(!a.options.ignoreHiddenFiles||"."!==b.name.substring(0,1))return b.fullPath=""+c+"/"+b.name,a.addFile(b)}):e.isDirectory&&a._addFilesFromDirectory(e,""+c+"/"+e.name)}f()}return null},d)}}(this);return f()};b.prototype.accept=function(a,c){return a.size>1048576*this.options.maxFilesize?
c(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(c(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,c):c(this.options.dictInvalidFileType)};b.prototype.addFile=function(a){a.upload={progress:0,
total:a.size,bytesSent:0};this.files.push(a);a.status=b.ADDED;this.emit("addedfile",a);this._enqueueThumbnail(a);return this.accept(a,function(c){return function(b){b?(a.accepted=!1,c._errorProcessing([a],b)):(a.accepted=!0,c.options.autoQueue&&c.enqueueFile(a));return c._updateMaxFilesReachedClass()}}(this))};b.prototype.enqueueFiles=function(a){var c;var b=0;for(c=a.length;b<c;b++){var d=a[b];this.enqueueFile(d)}return null};b.prototype.enqueueFile=function(a){if(a.status===b.ADDED&&!0===a.accepted){if(a.status=
b.QUEUED,this.options.autoProcessQueue)return setTimeout(function(a){return function(){return a.processQueue()}}(this),0)}else throw Error("This file can't be queued because it has already been processed or was rejected.");};b.prototype._thumbnailQueue=[];b.prototype._processingThumbnail=!1;b.prototype._enqueueThumbnail=function(a){if(this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),
0)};b.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){a._processingThumbnail=!1;return a._processThumbnailQueue()}}(this))};b.prototype.removeFile=function(a){a.status===b.UPLOADING&&this.cancelUpload(a);this.files=B(this.files,a);this.emit("removedfile",a);if(0===this.files.length)return this.emit("reset")};b.prototype.removeAllFiles=
function(a){var c;null==a&&(a=!1);var e=this.files.slice();var d=0;for(c=e.length;d<c;d++){var f=e[d];(f.status!==b.UPLOADING||a)&&this.removeFile(f)}return null};b.prototype.createThumbnail=function(a,c){var b=new FileReader;b.onload=function(d){return function(){if("image/svg+xml"===a.type)d.emit("thumbnail",a,b.result),null!=c&&c();else return d.createThumbnailFromUrl(a,b.result,c)}}(this);return b.readAsDataURL(a)};b.prototype.createThumbnailFromUrl=function(a,c,b,d){var e=document.createElement("img");
d&&(e.crossOrigin=d);e.onload=function(c){return function(){var d,f,k,g;a.width=e.width;a.height=e.height;var h=c.options.resize.call(c,a);null==h.trgWidth&&(h.trgWidth=h.optWidth);null==h.trgHeight&&(h.trgHeight=h.optHeight);var m=document.createElement("canvas");var l=m.getContext("2d");m.width=h.trgWidth;m.height=h.trgHeight;C(l,e,null!=(d=h.srcX)?d:0,null!=(f=h.srcY)?f:0,h.srcWidth,h.srcHeight,null!=(k=h.trgX)?k:0,null!=(g=h.trgY)?g:0,h.trgWidth,h.trgHeight);m=m.toDataURL("image/png");c.emit("thumbnail",
a,m);if(null!=b)return b()}}(this);null!=b&&(e.onerror=b);return e.src=c};b.prototype.processQueue=function(){var a;var c=this.options.parallelUploads;var b=a=this.getUploadingFiles().length;if(!(a>=c)){var d=this.getQueuedFiles();if(0<d.length){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,c-a));for(;b<c&&d.length;)this.processFile(d.shift()),b++}}};b.prototype.processFile=function(a){return this.processFiles([a])};b.prototype.processFiles=function(a){var c;var e=0;for(c=a.length;e<
c;e++){var d=a[e];d.processing=!0;d.status=b.UPLOADING;this.emit("processing",d)}this.options.uploadMultiple&&this.emit("processingmultiple",a);return this.uploadFiles(a)};b.prototype._getFilesWithXhr=function(a){var c;var b=this.files;var d=[];var e=0;for(c=b.length;e<c;e++){var g=b[e];g.xhr===a&&d.push(g)}return d};b.prototype.cancelUpload=function(a){var c;if(a.status===b.UPLOADING){var e=this._getFilesWithXhr(a.xhr);var d=0;for(c=e.length;d<c;d++){var f=e[d];f.status=b.CANCELED}a.xhr.abort();
a=0;for(d=e.length;a<d;a++)f=e[a],this.emit("canceled",f);this.options.uploadMultiple&&this.emit("canceledmultiple",e)}else if((f=a.status)===b.ADDED||f===b.QUEUED)a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]);if(this.options.autoProcessQueue)return this.processQueue()};var h=function(){var a=arguments[0];var c=2<=arguments.length?u.call(arguments,1):[];return"function"===typeof a?a.apply(this,c):a};b.prototype.uploadFile=function(a){return this.uploadFiles([a])};
b.prototype.uploadFiles=function(a){var c,e,d,f;var g=new XMLHttpRequest;var l=0;for(d=a.length;l<d;l++){var p=a[l];p.xhr=g}l=h(this.options.method,a);d=h(this.options.url,a);g.open(l,d,!0);g.withCredentials=!!this.options.withCredentials;var n=null;var u=function(c){return function(){var b;var d=[];var e=0;for(b=a.length;e<b;e++)p=a[e],d.push(c._errorProcessing(a,n||c.options.dictResponseError.replace("{{statusCode}}",g.status),g));return d}}(this);var x=function(c){return function(b){var d;if(null!=
b){var e=100*b.loaded/b.total;var f=0;for(d=a.length;f<d;f++)p=a[f],p.upload={progress:e,total:b.total,bytesSent:b.loaded}}else{b=!0;e=100;f=0;for(d=a.length;f<d;f++){p=a[f];if(100!==p.upload.progress||p.upload.bytesSent!==p.upload.total)b=!1;p.upload.progress=e;p.upload.bytesSent=p.upload.total}if(b)return}d=[];b=0;for(f=a.length;b<f;b++)p=a[b],d.push(c.emit("uploadprogress",p,e,p.upload.bytesSent));return d}}(this);g.onload=function(c){return function(d){var e;if(a[0].status!==b.CANCELED&&4===g.readyState){n=
g.responseText;if(g.getResponseHeader("content-type")&&~g.getResponseHeader("content-type").indexOf("application/json"))try{n=JSON.parse(n)}catch(D){d=D,n="Invalid JSON response from server."}x();return 200<=(e=g.status)&&300>e?c._finished(a,n,d):u()}}}(this);g.onerror=function(c){return function(){if(a[0].status!==b.CANCELED)return u()}}(this);(null!=(c=g.upload)?c:g).onprogress=x;l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&m(l,
this.options.headers);for(r in l)(c=l[r])&&g.setRequestHeader(r,c);var r=new FormData;if(this.options.params)for(q in l=this.options.params,l)c=l[q],r.append(q,c);var q=0;for(c=a.length;q<c;q++)p=a[q],this.emit("sending",p,g,r);this.options.uploadMultiple&&this.emit("sendingmultiple",a,g,r);if("FORM"===this.element.tagName)for(d=this.element.querySelectorAll("input, textarea, select, button"),c=0,l=d.length;c<l;c++){var t=d[c];q=t.getAttribute("name");var w=t.getAttribute("type");if("SELECT"===t.tagName&&
t.hasAttribute("multiple")){var y=t.options;w=0;for(f=y.length;w<f;w++)t=y[w],t.selected&&r.append(q,t.value)}else(!w||"checkbox"!==(e=w.toLowerCase())&&"radio"!==e||t.checked)&&r.append(q,t.value)}e=q=0;for(c=a.length-1;0<=c?q<=c:q>=c;e=0<=c?++q:--q)r.append(this._getParamName(e),a[e],this._renameFilename(a[e].name));return this.submitRequest(g,r,a)};b.prototype.submitRequest=function(a,b,e){return a.send(b)};b.prototype._finished=function(a,c,e){var d;var f=0;for(d=a.length;f<d;f++){var g=a[f];
g.status=b.SUCCESS;this.emit("success",g,c,e);this.emit("complete",g)}this.options.uploadMultiple&&(this.emit("successmultiple",a,c,e),this.emit("completemultiple",a));if(this.options.autoProcessQueue)return this.processQueue()};b.prototype._errorProcessing=function(a,c,e){var d;var f=0;for(d=a.length;f<d;f++){var g=a[f];g.status=b.ERROR;this.emit("error",g,c,e);this.emit("complete",g)}this.options.uploadMultiple&&(this.emit("errormultiple",a,c,e),this.emit("completemultiple",a));if(this.options.autoProcessQueue)return this.processQueue()};
return b}(x);l.version="4.3.0";l.options={};l.optionsForElement=function(e){if(e.getAttribute("id"))return l.options[E(e.getAttribute("id"))]};l.instances=[];l.forElement=function(e){"string"===typeof e&&(e=document.querySelector(e));if(null==(null!=e?e.dropzone:void 0))throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone};
l.autoDiscover=!0;l.discover=function(){var e;if(document.querySelectorAll)var b=document.querySelectorAll(".dropzone");else{b=[];var m=function(a){var c;var d=[];var e=0;for(c=a.length;e<c;e++){var g=a[e];/(^| )dropzone($| )/.test(g.className)?d.push(b.push(g)):d.push(void 0)}return d};m(document.getElementsByTagName("div"));m(document.getElementsByTagName("form"))}var h=[];var a=0;for(e=b.length;a<e;a++)m=b[a],!1!==l.optionsForElement(m)?h.push(new l(m)):h.push(void 0);return h};l.blacklistedBrowsers=
[/opera.*Macintosh.*version\/12/i];l.isBrowserSupported=function(){var e;var b=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var m=l.blacklistedBrowsers;var h=0;for(e=m.length;h<e;h++){var a=m[h];a.test(navigator.userAgent)&&(b=!1)}}else b=!1;else b=!1;return b};var B=function(e,b){var m;var h=[];var a=0;for(m=e.length;a<m;a++){var c=e[a];c!==b&&h.push(c)}return h};var E=function(e){return e.replace(/[\-_](\w)/g,
function(b){return b.charAt(1).toUpperCase()})};l.createElement=function(e){var b=document.createElement("div");b.innerHTML=e;return b.childNodes[0]};l.elementInside=function(e,b){if(e===b)return!0;for(;e=e.parentNode;)if(e===b)return!0;return!1};l.getElement=function(e,b){var m;"string"===typeof e?m=document.querySelector(e):null!=e.nodeType&&(m=e);if(null==m)throw Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return m};l.getElements=function(e,
b){var m;if(e instanceof Array){var h=[];try{var a=0;for(m=e.length;a<m;a++){var c=e[a];h.push(this.getElement(c,b))}}catch(d){h=null}}else if("string"===typeof e){h=[];var k=document.querySelectorAll(e);a=0;for(m=k.length;a<m;a++)c=k[a],h.push(c)}else null!=e.nodeType&&(h=[e]);if(null==h||!h.length)throw Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return h};l.confirm=function(e,b,m){if(window.confirm(e))return b();if(null!=m)return m()};
l.isValidFile=function(e,b){var m;if(!b)return!0;b=b.split(",");var h=e.type;var a=h.replace(/\/.*$/,"");var c=0;for(m=b.length;c<m;c++){var k=b[c];k=k.trim();if("."===k.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(k.toLowerCase(),e.name.length-k.length))return!0}else if(/\/\*$/.test(k)){if(a===k.replace(/\/.*$/,""))return!0}else if(h===k)return!0}return!1};"undefined"!==typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new l(this,e)})});"undefined"!==
typeof module&&null!==module?module.exports=l:window.Dropzone=l;l.ADDED="added";l.QUEUED="queued";l.ACCEPTED=l.QUEUED;l.UPLOADING="uploading";l.PROCESSING=l.UPLOADING;l.CANCELED="canceled";l.ERROR="error";l.SUCCESS="success";var F=function(e){var b,m;var h=e.naturalHeight;var a=document.createElement("canvas");a.width=1;a.height=h;a=a.getContext("2d");a.drawImage(e,0,0);a=a.getImageData(0,0,1,h).data;var c=0;for(m=b=h;m>c;)e=a[4*(m-1)+3],0===e?b=m:c=m,m=b+c>>1;h=m/h;return 0===h?1:h};var C=function(e,
b,m,h,a,c,k,d,f,g){var l=F(b);return e.drawImage(b,m,h,a,c,k,d,f,g/l)};l._autoDiscoverFunction=function(){if(l.autoDiscover)return l.discover()};(function(e,b){var l=!1;var h=!0;var a=e.document;var c=a.documentElement;var k=a.addEventListener?"addEventListener":"attachEvent";var d=a.addEventListener?"removeEventListener":"detachEvent";var f=a.addEventListener?"":"on";var g=function(c){if("readystatechange"!==c.type||"complete"===a.readyState)if(("load"===c.type?e:a)[d](f+c.type,g,!1),!l&&(l=!0))return b.call(e,
c.type||c)};var n=function(){try{c.doScroll("left")}catch(p){setTimeout(n,50);return}return g("poll")};if("complete"!==a.readyState){if(a.createEventObject&&c.doScroll){try{h=!e.frameElement}catch(p){}h&&n()}a[k](f+"DOMContentLoaded",g,!1);a[k](f+"readystatechange",g,!1);return e[k](f+"load",g,!1)}})(window,l._autoDiscoverFunction)}).call(this);
/* Chosen v1.5.1 | (c) 2011-2016 by Harvest | MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md */
(function(){var a,AbstractChosen,Chosen,SelectParser,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},SelectParser.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),title:a.title?a.title:void 0,children:0,disabled:a.disabled,classes:a.className}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},SelectParser.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,title:a.title?a.title:void 0,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,group_label:null!=b?this.parsed[b].label:null,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},SelectParser}(),SelectParser.select_to_array=function(a){var b,c,d,e,f;for(c=new SelectParser,f=a.childNodes,d=0,e=f.length;e>d;d++)b=f[d],c.add_node(b);return c.parsed},AbstractChosen=function(){function AbstractChosen(a,b){this.form_field=a,this.options=null!=b?b:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return AbstractChosen.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.choice_label=function(a){return this.include_group_label_in_selected&&null!=a.group_label?"<b class='group-name'>"+a.group_label+"</b>"+a.html:a.html},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(a){var b=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(a){var b=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return b.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(a){var b,c,d,e,f,g,h;for(b="",e=0,h=this.results_data,f=0,g=h.length;g>f&&(c=h[f],d="",d=c.group?this.result_add_group(c):this.result_add_option(c),""!==d&&(e++,b+=d),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(c))),!(e>=this.max_shown_results));f++);return b},AbstractChosen.prototype.result_add_option=function(a){var b,c;return a.search_match&&this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML=a.search_text,a.title&&(c.title=a.title),this.outerHTML(c)):""},AbstractChosen.prototype.result_add_group=function(a){var b,c;return(a.search_match||a.group_match)&&a.active_options>0?(b=[],b.push("group-result"),a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.innerHTML=a.search_text,a.title&&(c.title=a.title),this.outerHTML(c)):""},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.selected?e.push(a.selected=!1):e.push(void 0);return e},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(this.no_results_clear(),d=0,f=this.get_search_text(),a=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp(a,"i"),c=this.get_search_regex(a),l=this.results_data,j=0,k=l.length;k>j;j++)b=l[j],b.search_match=!1,e=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(e=this.results_data[b.group_array_index],0===e.active_options&&e.search_match&&(d+=1),e.active_options+=1),b.search_text=b.group?b.label:b.html,(!b.group||this.group_search)&&(b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(d+=1),b.search_match?(f.length&&(g=b.search_text.search(i),h=b.search_text.substr(0,g+f.length)+"</em>"+b.search_text.substr(g+f.length),b.search_text=h.substr(0,g)+"<em>"+h.substr(g)),null!=e&&(e.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>d&&f.length?(this.update_results_content(""),this.no_results(f)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.get_search_regex=function(a){var b;return b=this.search_contains?"":"^",new RegExp(b+a,"i")},AbstractChosen.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},AbstractChosen.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(a){var b=this;return setTimeout(function(){return b.results_search()},50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},AbstractChosen.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},AbstractChosen.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},AbstractChosen.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0},AbstractChosen.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},AbstractChosen.browser_is_supported=function(){return/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:/IEMobile/i.test(window.navigator.userAgent)?!1:/Windows Phone/i.test(window.navigator.userAgent)?!1:/BlackBerry/i.test(window.navigator.userAgent)?!1:/BB10/i.test(window.navigator.userAgent)?!1:"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),a=jQuery,a.fn.extend({chosen:function(b){return AbstractChosen.browser_is_supported()?this.each(function(c){var d,e;return d=a(this),e=d.data("chosen"),"destroy"===b?void(e instanceof Chosen&&e.destroy()):void(e instanceof Chosen||d.data("chosen",new Chosen(this,b)))}):this}}),Chosen=function(c){function Chosen(){return b=Chosen.__super__.constructor.apply(this,arguments)}return d(Chosen,c),Chosen.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var a=this;return this.container.bind("touchstart.chosen",function(b){return a.container_mousedown(b),b.preventDefault()}),this.container.bind("touchend.chosen",function(b){return a.container_mouseup(b),b.preventDefault()}),this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},Chosen.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},Chosen.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=a.originalEvent.deltaY||-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(a){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(b){var c;return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(a){return this.search_results.html(a)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(a){var b;return this.form_field.tabIndex?(b=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=b):void 0},Chosen.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},Chosen.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(b)+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},Chosen.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},Chosen.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(a){var b,c;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(this.choice_label(c)),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,a.preventDefault(),this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(a)},Chosen.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return a("<div/>").text(a.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},Chosen.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},Chosen}(AbstractChosen)}).call(this);
/*
    jQuery Masked Input Plugin
    Copyright (c) 2007 - 2014 Josh Bush (digitalbush.com)
    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
    Version: 1.4.0
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(""),function(a,b){"?"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(a.length<o.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop("readonly")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop("readonly")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(""))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join("")===D?(B.val()&&B.val(""),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(""),function(a,b){return"?"!=a?i[a]?p(b):a:void 0}),D=C.join(""),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join("")}),B.one("unmask",function(){B.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!B.prop("readonly")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){z(),a==c.replace("?","").length?B.caret(0,a):B.caret(a)},10)}}).on("blur.mask",v).on("keydown.mask",w).on("keypress.mask",x).on("input.mask paste.mask",function(){B.prop("readonly")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off("input.mask").on("input.mask",u),A()})}})});
